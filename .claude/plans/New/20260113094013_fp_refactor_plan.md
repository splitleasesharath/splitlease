# Functional Programming Refactoring Plan

Date: 2026-01-13
Target: agents/20260113094013_fp_audit_violations.json
Severity Filter: all

**Total Unique Violations:** 398

## Summary

### By Type
| Type | Count |
|------|-------|
| MUTATING_METHOD | 258 |
| IMPERATIVE_LOOP | 84 |
| EXCEPTION_FOR_FLOW | 52 |
| IO_IN_CORE | 4 |

### By Severity
| Severity | Count |
|----------|-------|
| HIGH | 337 |
| MEDIUM | 61 |

### Top 20 Files by Violation Count
| File | Violations |
|------|------------|
| islands\pages\SelfListingPage\store\listingLocalStore.ts | 21 |
| lib\availabilityValidation.js | 15 |
| islands\pages\SelfListingPage\store\prepareListingSubmission.ts | 15 |
| islands\shared\LoggedInAvatar\LoggedInAvatar.jsx | 12 |
| lib\listingService.js | 11 |
| islands\pages\ListingDashboardPage\components\AvailabilitySection.jsx | 11 |
| islands\shared\AiSignupMarketReport\AiSignupMarketReport.jsx | 10 |
| islands\pages\ListingDashboardPage\components\PricingEditSection.jsx | 10 |
| islands\pages\SelfListingPage\sections\Section1SpaceSnapshot.tsx | 10 |
| islands\pages\SelfListingPage\sections\Section5Rules.tsx | 10 |
| islands\shared\SearchScheduleSelector.jsx | 9 |
| lib\photoUpload.js | 8 |
| lib\supabaseUtils.js | 8 |
| islands\shared\HostScheduleSelector\utils.js | 8 |
| islands\pages\SearchPage.jsx | 8 |
| islands\shared\HostScheduleSelector\HostScheduleSelector.jsx | 8 |
| lib\bubbleAPI.js | 7 |
| islands\shared\EditListingDetails\useEditListingDetailsLogic.js | 7 |
| islands\shared\VirtualMeetingManager\dateUtils.js | 7 |
| islands\pages\AccountProfilePage\useAccountProfilePageLogic.js | 7 |

~~~~~

## CHUNK 1: Replace .push()

**File:** app/src/routes.config.js
**Line:** 380
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
excludedFromFunctions.push('/guest-proposals', '/guest-proposals/*');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 2: Replace for loop

**File:** app/src/routes.config.js
**Line:** 418
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const alias of route.aliases) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 3: Replace for loop

**File:** app/src/routes.config.js
**Line:** 441
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const route of routes) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 4: Replace .sort()

**File:** app/src/lib/aiService.js
**Line:** 106
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
return [...amenities].sort((a, b) => {
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 5: Replace while loop

**File:** app/src/lib/auth.js
**Line:** 563
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
while (verifyAttempts < maxVerifyAttempts) {
```

**Refactored Code:**
```javascript
// Use declarative pattern
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 6: Replace while loop

**File:** app/src/lib/auth.js
**Line:** 786
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
while (verifyAttempts < maxVerifyAttempts) {
```

**Refactored Code:**
```javascript
// Use declarative pattern
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 7: Replace for loop

**File:** app/src/lib/availabilityValidation.js
**Line:** 38
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 8: Replace for loop

**File:** app/src/lib/availabilityValidation.js
**Line:** 65
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = minNotSelected; i <= maxNotSelected; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 9: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 66
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
expectedNotSelected.push(i);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 10: Replace .sort()

**File:** app/src/lib/availabilityValidation.js
**Line:** 97
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sorted = [...selectedDays].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 11: Replace for loop

**File:** app/src/lib/availabilityValidation.js
**Line:** 106
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 12: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 166
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push('Please select at least one day');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 13: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 175
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push('Please check for contiguous nights to continue with your proposal');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 14: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 181
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.warnings.push(`Host prefers at least ${listing['Minimum Nights']} nights per week`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 15: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 186
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.warnings.push(`Host prefers at most ${listing['Maximum Nights']} nights per week`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 16: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 199
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push('Some selected days are not available for this listing');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 17: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 271
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push('Please select a move-in date');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 18: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 280
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push('Move-in date cannot be in the past');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 19: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 287
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push('Move-in date is outside available range');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 20: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 294
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push('Selected move-in date is not available');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 21: Replace .push()

**File:** app/src/lib/availabilityValidation.js
**Line:** 305
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.errors.push(`Move-in date must be on a ${DAY_NAMES[checkInDay]} based on your selected schedule`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 22: Replace throw

**File:** app/src/lib/bubbleAPI.js
**Line:** 44
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Listing name is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 23: Replace throw

**File:** app/src/lib/bubbleAPI.js
**Line:** 88
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Listing ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 24: Replace throw

**File:** app/src/lib/bubbleAPI.js
**Line:** 135
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Listing ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 25: Replace throw

**File:** app/src/lib/bubbleAPI.js
**Line:** 139
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('At least one photo is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 26: Replace throw

**File:** app/src/lib/bubbleAPI.js
**Line:** 190
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Listing ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 27: Replace throw

**File:** app/src/lib/bubbleAPI.js
**Line:** 194
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('User email is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 28: Replace throw

**File:** app/src/lib/bubbleAPI.js
**Line:** 198
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Listing data is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 29: Replace .push()

**File:** app/src/lib/dataLookups.js
**Line:** 562
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
policies.push({ id, display: policy.display });
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 30: Replace .push()

**File:** app/src/lib/dataLookups.js
**Line:** 592
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
reasons.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 31: Replace .sort()

**File:** app/src/lib/dataLookups.js
**Line:** 598
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
return reasons.sort((a, b) => a.displayOrder - b.displayOrder);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 32: Replace .push()

**File:** app/src/lib/dataLookups.js
**Line:** 609
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
reasons.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 33: Replace .sort()

**File:** app/src/lib/dataLookups.js
**Line:** 615
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
return reasons.sort((a, b) => a.displayOrder - b.displayOrder);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 34: Replace .push()

**File:** app/src/lib/hotjar.js
**Line:** 18
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 35: Replace .sort()

**File:** app/src/lib/listingDataFetcher.js
**Line:** 201
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
sortedPhotos = sortedPhotos.sort((a, b) => {
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 36: Replace throw

**File:** app/src/lib/listingService.js
**Line:** 246
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('User ID is required to create a listing');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 37: Replace .push()

**File:** app/src/lib/listingService.js
**Line:** 335
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
currentListings.push(listingId);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 38: Replace for loop

**File:** app/src/lib/listingService.js
**Line:** 766
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const day of dayOrder) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 39: Replace .push()

**File:** app/src/lib/listingService.js
**Line:** 768
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.push(dayNameMapping[day]);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 40: Replace throw

**File:** app/src/lib/listingService.js
**Line:** 790
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Listing ID is required for update');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 41: Replace for loop

**File:** app/src/lib/listingService.js
**Line:** 982
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [key, value] of Object.entries(formData)) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 42: Replace throw

**File:** app/src/lib/listingService.js
**Line:** 1003
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Listing ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 43: Replace for loop

**File:** app/src/lib/listingService.js
**Line:** 1076
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [day, isSelected] of Object.entries(availableNights)) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 44: Replace .push()

**File:** app/src/lib/listingService.js
**Line:** 1078
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
result.push(dayMapping[day]);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 45: Replace .sort()

**File:** app/src/lib/listingService.js
**Line:** 1082
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
return result.sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 46: Replace for loop

**File:** app/src/lib/listingService.js
**Line:** 1240
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const dayNum of daysArray) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 47: Replace for loop

**File:** app/src/lib/photoUpload.js
**Line:** 28
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let offset = 0; offset < byteCharacters.length; offset += 512) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 48: Replace for loop

**File:** app/src/lib/photoUpload.js
**Line:** 32
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < slice.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 49: Replace .push()

**File:** app/src/lib/photoUpload.js
**Line:** 36
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
byteArrays.push(new Uint8Array(byteNumbers));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 50: Replace mutation

**File:** app/src/lib/photoUpload.js
**Line:** 86
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
extension = photo.file.name.split('.').pop().toLowerCase() || 'jpg';
```

**Refactored Code:**
```javascript
// Use immutable method
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 51: Replace throw

**File:** app/src/lib/photoUpload.js
**Line:** 112
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error(`Invalid photo format for photo ${index + 1}`);
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 52: Replace for loop

**File:** app/src/lib/photoUpload.js
**Line:** 164
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < photos.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 53: Replace .push()

**File:** app/src/lib/photoUpload.js
**Line:** 170
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
uploadedPhotos.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 54: Replace .push()

**File:** app/src/lib/photoUpload.js
**Line:** 184
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
uploadedPhotos.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 55: Replace for loop

**File:** app/src/lib/sanitize.js
**Line:** 252
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [key, record] of rateLimitMap.entries()) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 56: Replace for loop

**File:** app/src/lib/secureStorage.js
**Line:** 233
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < localStorage.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 57: Replace .push()

**File:** app/src/lib/secureStorage.js
**Line:** 236
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
keysToRemove.push(key);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 58: Replace throw

**File:** app/src/lib/slackService.js
**Line:** 30
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('All fields are required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 59: Replace throw

**File:** app/src/lib/supabase.js
**Line:** 7
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Missing Supabase environment variables: VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY are required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 60: Replace for loop

**File:** app/src/lib/supabaseUtils.js
**Line:** 178
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const photo of photos) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 61: Replace .push()

**File:** app/src/lib/supabaseUtils.js
**Line:** 189
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
photoUrls.push(photoUrl);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 62: Replace .push()

**File:** app/src/lib/supabaseUtils.js
**Line:** 203
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
photoUrls.push(photoUrl);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 63: Replace .push()

**File:** app/src/lib/supabaseUtils.js
**Line:** 210
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
photoUrls.push(url);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 64: Replace for loop

**File:** app/src/lib/supabaseUtils.js
**Line:** 258
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [key, amenity] of Object.entries(amenitiesMap)) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 65: Replace .push()

**File:** app/src/lib/supabaseUtils.js
**Line:** 260
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
amenities.push(amenity);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 66: Replace .push()

**File:** app/src/lib/supabaseUtils.js
**Line:** 269
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
amenities.push(amenitiesMap['kitchen']);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 67: Replace .sort()

**File:** app/src/lib/supabaseUtils.js
**Line:** 274
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
amenities.sort((a, b) => a.priority - b.priority);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 68: Replace while loop

**File:** app/src/lib/workflowClient.js
**Line:** 139
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
while (Date.now() - startTime < timeout) {
```

**Refactored Code:**
```javascript
// Use declarative pattern
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 69: Replace throw

**File:** app/src/logic/workflows/booking/acceptProposalWorkflow.js
**Line:** 34
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('acceptProposalWorkflow: supabase client is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 70: Replace throw

**File:** app/src/logic/workflows/booking/acceptProposalWorkflow.js
**Line:** 38
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('acceptProposalWorkflow: proposal with id is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 71: Replace throw

**File:** app/src/logic/workflows/booking/acceptProposalWorkflow.js
**Line:** 42
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('acceptProposalWorkflow: canAcceptProposal rule function is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 72: Replace throw

**File:** app/src/logic/workflows/booking/cancelProposalWorkflow.js
**Line:** 46
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('cancelProposalWorkflow: supabase client is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 73: Replace throw

**File:** app/src/logic/workflows/booking/cancelProposalWorkflow.js
**Line:** 50
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('cancelProposalWorkflow: proposal with id is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 74: Replace throw

**File:** app/src/logic/workflows/booking/cancelProposalWorkflow.js
**Line:** 54
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('cancelProposalWorkflow: canCancelProposal rule function is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 75: Replace throw

**File:** app/src/logic/workflows/booking/loadProposalDetailsWorkflow.js
**Line:** 49
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('loadProposalDetailsWorkflow: rawProposal is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 76: Replace throw

**File:** app/src/logic/workflows/booking/loadProposalDetailsWorkflow.js
**Line:** 53
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('loadProposalDetailsWorkflow: supabase client is required')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 77: Replace throw

**File:** app/src/logic/workflows/proposals/cancelProposalWorkflow.js
**Line:** 97
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Proposal ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 78: Replace throw

**File:** app/src/logic/workflows/proposals/cancelProposalWorkflow.js
**Line:** 154
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Proposal ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 79: Replace throw

**File:** app/src/logic/workflows/proposals/counterofferWorkflow.js
**Line:** 31
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Proposal ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 80: Replace throw

**File:** app/src/logic/workflows/proposals/counterofferWorkflow.js
**Line:** 88
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Proposal ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 81: Replace throw

**File:** app/src/logic/workflows/proposals/counterofferWorkflow.js
**Line:** 125
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Proposal is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 82: Replace throw

**File:** app/src/logic/workflows/proposals/virtualMeetingWorkflow.js
**Line:** 26
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Proposal ID and Guest ID are required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 83: Replace throw

**File:** app/src/logic/workflows/proposals/virtualMeetingWorkflow.js
**Line:** 81
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Existing VM ID, Proposal ID, and Guest ID are required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 84: Replace throw

**File:** app/src/logic/workflows/proposals/virtualMeetingWorkflow.js
**Line:** 109
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Virtual meeting ID and booked date are required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 85: Replace throw

**File:** app/src/logic/workflows/proposals/virtualMeetingWorkflow.js
**Line:** 142
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Virtual meeting ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 86: Replace throw

**File:** app/src/logic/workflows/proposals/virtualMeetingWorkflow.js
**Line:** 175
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Virtual meeting ID is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 87: Replace throw

**File:** app/src/logic/rules/proposals/determineProposalStage.js
**Line:** 29
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('determineProposalStage: proposalStatus is required and must be a string')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 88: Replace for loop

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 46
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const day of selectedDayIndices) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 89: Replace for loop

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 64
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 90: Replace for loop

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 95
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = minNotSelected; i <= maxNotSelected; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 91: Replace .push()

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 96
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
expectedNotSelected.push(i)
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 92: Replace throw

**File:** app/src/logic/rules/search/hasListingPhotos.js
**Line:** 23
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('hasListingPhotos: listing cannot be null or undefined')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 93: Replace throw

**File:** app/src/logic/rules/users/shouldShowFullName.js
**Line:** 24
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('shouldShowFullName requires a valid firstName');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 94: Replace throw

**File:** app/src/logic/rules/users/shouldShowFullName.js
**Line:** 29
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('shouldShowFullName requires isMobile to be a boolean');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 95: Replace throw

**File:** app/src/logic/processors/display/formatHostName.js
**Line:** 33
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('formatHostName: fullName cannot be empty or whitespace')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 96: Move I/O to shell

**File:** app/src/logic/processors/listing/extractListingCoordinates.js
**Line:** 46
**Violation:** IO_IN_CORE - I/O operation found in core business logic
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
console.error(
```

**Refactored Code:**
```javascript
// Extract pure logic
```

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 97: Move I/O to shell

**File:** app/src/logic/processors/listing/extractListingCoordinates.js
**Line:** 62
**Violation:** IO_IN_CORE - I/O operation found in core business logic
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
console.error(' extractListingCoordinates: Failed to parse Location - Address:', {
```

**Refactored Code:**
```javascript
// Extract pure logic
```

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 98: Move I/O to shell

**File:** app/src/logic/processors/listing/extractListingCoordinates.js
**Line:** 98
**Violation:** IO_IN_CORE - I/O operation found in core business logic
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
console.warn(' extractListingCoordinates: No valid coordinates found for listing:', {
```

**Refactored Code:**
```javascript
// Extract pure logic
```

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 99: Replace throw

**File:** app/src/logic/processors/proposal/processProposalData.js
**Line:** 39
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processProposalData: rawProposal cannot be null or undefined')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 100: Replace throw

**File:** app/src/logic/processors/proposals/processProposalData.js
**Line:** 20
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processUserData: User data is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 101: Replace throw

**File:** app/src/logic/processors/proposals/processProposalData.js
**Line:** 24
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processUserData: User ID (_id) is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 102: Replace throw

**File:** app/src/logic/processors/proposals/processProposalData.js
**Line:** 135
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processProposalData: Proposal data is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 103: Replace throw

**File:** app/src/logic/processors/proposals/processProposalData.js
**Line:** 139
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processProposalData: Proposal ID (_id) is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 104: Replace throw

**File:** app/src/logic/processors/proposals/processProposalData.js
**Line:** 297
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('getEffectiveTerms: Proposal is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 105: Replace throw

**File:** app/src/logic/processors/user/processUserData.js
**Line:** 33
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processUserData: rawUser cannot be null or undefined')
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 106: Move I/O to shell

**File:** app/src/logic/processors/user/processUserData.js
**Line:** 58
**Violation:** IO_IN_CORE - I/O operation found in core business logic
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
console.warn(`processUserData: User ${rawUser._id} has no name fields, using default`)
```

**Refactored Code:**
```javascript
// Extract pure logic
```

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 107: Replace throw

**File:** app/src/logic/processors/user/processUserDisplayName.js
**Line:** 27
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processUserDisplayName requires a valid firstName. Cannot display user without name.');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 108: Replace throw

**File:** app/src/logic/processors/user/processUserInitials.js
**Line:** 25
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('processUserInitials requires a valid firstName. Cannot generate initials without user name.');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 109: Replace for loop

**File:** app/src/logic/calculators/scheduling/calculateCheckInOutDays.js
**Line:** 42
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const day of selectedDays) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 110: Replace .sort()

**File:** app/src/logic/calculators/scheduling/calculateCheckInOutDays.js
**Line:** 50
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sorted = [...selectedDays].sort((a, b) => a - b)
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 111: Replace for loop

**File:** app/src/logic/calculators/scheduling/calculateCheckInOutDays.js
**Line:** 59
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 112: Replace for loop

**File:** app/src/logic/calculators/scheduling/calculateNextAvailableCheckIn.js
**Line:** 36
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const day of selectedDayIndices) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 113: Replace .sort()

**File:** app/src/logic/calculators/scheduling/calculateNextAvailableCheckIn.js
**Line:** 54
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedDays = [...selectedDayIndices].sort((a, b) => a - b)
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 114: Replace for loop

**File:** app/src/logic/calculators/scheduling/calculateNightsFromDays.js
**Line:** 28
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const day of selectedDays) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 115: Replace .push()

**File:** app/src/lib/proposals/userProposalQueries.js
**Line:** 225
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
listingsNeedingPhotoFetch.push(listing._id);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 116: Replace .sort()

**File:** app/src/lib/scheduleSelector/dayHelpers.js
**Line:** 44
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
return [...days].sort((a, b) => a.dayOfWeek - b.dayOfWeek);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 117: Replace for loop

**File:** app/src/lib/scheduleSelector/dayHelpers.js
**Line:** 112
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < sortedDays.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 118: Replace .push()

**File:** app/src/lib/scheduleSelector/dayHelpers.js
**Line:** 113
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
nights.push(createNight(sortedDays[i].dayOfWeek));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 119: Replace for loop

**File:** app/src/lib/scheduleSelector/nightCalculations.js
**Line:** 14
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < sorted.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 120: Replace .push()

**File:** app/src/lib/scheduleSelector/nightCalculations.js
**Line:** 15
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
nights.push(createNight(sorted[i].dayOfWeek));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 121: Replace for loop

**File:** app/src/lib/scheduleSelector/nightCalculations.js
**Line:** 50
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < dayNumbers.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 122: Replace for loop

**File:** app/src/lib/scheduleSelector/validators.js
**Line:** 101
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = minNotSelected; i <= maxNotSelected; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 123: Replace .push()

**File:** app/src/lib/scheduleSelector/validators.js
**Line:** 102
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
expectedNotSelected.push(i);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 124: Replace for loop

**File:** app/src/lib/scheduleSelector/validators.js
**Line:** 114
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < dayNumbers.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 125: Replace .push()

**File:** app/src/islands/pages/useEmailSmsUnitPageLogic.js
**Line:** 229
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
emails.push('');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 126: Replace throw

**File:** app/src/islands/pages/useRentalApplicationPageLogic.js
**Line:** 885
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('You must be logged in to submit a rental application.');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 127: Replace .push()

**File:** app/src/islands/pages/useSearchPageLogic.js
**Line:** 148
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName)
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 128: Replace .push()

**File:** app/src/islands/pages/useSearchPageLogic.js
**Line:** 149
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName)
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 129: Replace .push()

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 267
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (city) parts.push(city);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 130: Replace .push()

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 268
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (state) parts.push(state);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 131: Replace .push()

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 269
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (zip) parts.push(zip);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 132: Replace for loop

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 528
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [key, value] of Object.entries(formData)) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 133: Replace for loop

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 833
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < files.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 134: Replace .push()

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 837
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
uploadedUrls.push(result.url);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 135: Replace mutation

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 946
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
updated.unshift(selectedPhoto);
```

**Refactored Code:**
```javascript
// Use immutable method
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 136: Replace .sort()

**File:** app/src/islands/shared/HostEditingProposal/types.js
**Line:** 136
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedNights = [...selectedNights].sort((a, b) => a - b)
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 137: Replace .sort()

**File:** app/src/islands/shared/HostEditingProposal/types.js
**Line:** 148
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedNights = [...selectedNights].sort((a, b) => a - b)
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 138: Replace .sort()

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 25
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
.sort((a, b) => a - b)
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 139: Replace for loop

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 29
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < numbers.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 140: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 31
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
gaps.push(i)
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 141: Replace for loop

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 59
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = startIdx; i <= endIdx; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 142: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 60
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
sequence.push(getNightByDayIndex(i).id)
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 143: Replace for loop

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 64
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = startIdx; i >= endIdx; i--) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 144: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 65
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
sequence.push(getNightByDayIndex(i).id)
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 145: Replace .sort()

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 133
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
return [...nights].sort((a, b) => {
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 146: Replace .push()

**File:** app/src/islands/shared/NotificationSettingsIsland/notificationCategories.js
**Line:** 122
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
arr.push(channel);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 147: Replace for loop

**File:** app/src/islands/shared/RentalApplicationWizardModal/useRentalApplicationWizardLogic.js
**Line:** 267
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let step = 1; step <= TOTAL_STEPS; step++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 148: Replace .push()

**File:** app/src/islands/shared/RentalApplicationWizardModal/useRentalApplicationWizardLogic.js
**Line:** 269
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
newCompleted.push(step);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 149: Replace throw

**File:** app/src/islands/shared/RentalApplicationWizardModal/useRentalApplicationWizardLogic.js
**Line:** 517
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('You must be logged in to submit.');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 150: Replace for loop

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 40
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < totalDays; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 151: Replace .push()

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 43
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push(date);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 152: Replace for loop

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 61
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let hour = startHour; hour < endHour; hour++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 153: Replace for loop

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 62
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let minutes = 0; minutes < 60; minutes += intervalMinutes) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 154: Replace .push()

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 66
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
slots.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 155: Replace .push()

**File:** app/src/islands/shared/SuggestedProposals/suggestedProposalService.js
**Line:** 89
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
summaryMap[proposalId].push(summary);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 156: Replace for loop

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 71
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let hour = startHour; hour < endHour; hour++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 157: Replace for loop

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 72
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let minute = 0; minute < 60; minute += interval) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 158: Replace .push()

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 75
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
slots.push(slotTime);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 159: Replace for loop

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 95
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < startingDayOfWeek; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 160: Replace .push()

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 96
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push(null);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 161: Replace for loop

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 100
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let day = 1; day <= daysInMonth; day++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 162: Replace .push()

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 101
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push(new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 163: Replace for loop

**File:** app/src/islands/shared/VirtualMeetingManager/virtualMeetingService.js
**Line:** 312
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let attempt = 0; attempt < maxRetries; attempt++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 164: Replace .push()

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 99
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
actions.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 165: Replace .push()

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 107
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
actions.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 166: Replace .push()

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 115
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
actions.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 167: Replace .push()

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 123
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
actions.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 168: Replace .push()

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 131
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
actions.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 169: Replace .sort()

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 718
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
: [...currentDays, dayIndex].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 170: Replace mutation

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 964
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const fileExtension = file.name.split('.').pop()?.toLowerCase() || 'jpg';
```

**Refactored Code:**
```javascript
// Use immutable method
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 171: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 66
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
parts.push('1 bedroom');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 172: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 70
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
parts.push(`${bedrooms} bedrooms`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 173: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 76
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
parts.push(bathroomDisplay);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 174: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 81
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
parts.push(kitchenType);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 175: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 115
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (borough) parts.push(borough);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 176: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 116
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (hood) parts.push(hood);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 177: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 117
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (city) parts.push(city);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 178: Replace for loop

**File:** app/src/islands/pages/HostOverviewPage/useHostOverviewPageLogic.js
**Line:** 47
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const { pattern, name } of boroughPatterns) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 179: Replace .push()

**File:** app/src/islands/pages/HostOverviewPage/useHostOverviewPageLogic.js
**Line:** 154
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
fetchPromises.push(
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 180: Replace .push()

**File:** app/src/islands/pages/HostOverviewPage/useHostOverviewPageLogic.js
**Line:** 182
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
fetchPromises.push(
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 181: Replace .push()

**File:** app/src/islands/pages/HostOverviewPage/useHostOverviewPageLogic.js
**Line:** 198
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
fetchPromises.push(
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 182: Replace while loop

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 253
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
while (current !== checkOutIndex) {
```

**Refactored Code:**
```javascript
// Use declarative pattern
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 183: Replace .push()

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 254
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
activeDays.push(dayNames[current]);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 184: Replace .sort()

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 342
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sorted = [...dayIndices].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 185: Replace for loop

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 351
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 186: Replace .sort()

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 411
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
.sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 187: Replace for loop

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 423
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sortedNights.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 188: Replace .sort()

**File:** app/src/islands/pages/HostProposalsPage/useHostProposalsPageLogic.js
**Line:** 266
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedListings = [...listingsResult].sort((a, b) => {
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 189: Replace for loop

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 920
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [key, value] of Object.entries(updates)) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 190: Replace mutation

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 1269
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
newPhotos.unshift(selectedPhoto);
```

**Refactored Code:**
```javascript
// Use immutable method
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 191: Replace for loop

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 1295
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < newPhotos.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 192: Replace for loop

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 1338
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < newPhotos.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 193: Replace .push()

**File:** app/src/islands/modals/FullscreenProposalMapModal.jsx
**Line:** 357
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 194: Replace for loop

**File:** app/src/islands/pages/FAQPage.jsx
**Line:** 77
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [tabName, dbCategory] of Object.entries(categoryMapping)) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 195: Replace .push()

**File:** app/src/islands/pages/FAQPage.jsx
**Line:** 79
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
grouped[tabName].push(faq);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 196: Replace .push()

**File:** app/src/islands/pages/FAQPage.jsx
**Line:** 356
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
faqsBySubCategory[subCat].push(faq);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 197: Replace .push()

**File:** app/src/islands/pages/HomePage.jsx
**Line:** 346
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
legacyPhotoIds.push(firstPhoto);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 198: Replace for loop

**File:** app/src/islands/pages/ListWithUsPage.jsx
**Line:** 27
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < 7; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 199: Replace .push()

**File:** app/src/islands/pages/ListWithUsPage.jsx
**Line:** 28
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
prices.push(Math.ceil(prices[i - 1] * clampedDecay));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 200: Replace for loop

**File:** app/src/islands/pages/PreviewSplitLeasePage.jsx
**Line:** 841
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const [key, value] of Object.entries(updates)) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 201: Replace .sort()

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 89
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedDays = [...selectedDaysArray].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 202: Replace for loop

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 99
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sortedDays.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 203: Replace .push()

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 1979
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 204: Replace .push()

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 1980
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 205: Replace .sort()

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2318
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedJsDays = [...daysInJsFormat].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 206: Replace for loop

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2330
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < sortedJsDays.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 207: Replace .push()

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2632
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
roots.push(rootDesktop);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 208: Replace .push()

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2638
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
roots.push(rootMobile);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 209: Replace .push()

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1273
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 210: Replace .push()

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1274
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 211: Replace .push()

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1474
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
roots.push(rootDesktop);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 212: Replace .push()

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1480
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
roots.push(rootMobile);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 213: Replace .push()

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 250
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
features.push({ icon: 'chef-hat', text: listing['Kitchen Type'] });
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 214: Replace .push()

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 256
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
features.push({ icon: 'bath', text: `${count} ${text}` });
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 215: Replace .push()

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 260
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
features.push({ icon: 'home', text: listing.resolvedTypeOfSpace });
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 216: Replace .push()

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 266
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
features.push({ icon: 'bed-double', text: `${count} ${text}` });
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 217: Replace .sort()

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 1170
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedPhotos = (photosData || []).sort((a, b) => {
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 218: Replace .sort()

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 1207
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
return [...prev, dayIndex].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 219: Replace .sort()

**File:** app/src/islands/pages/ViewSplitLeasePage.jsx
**Line:** 798
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedDays = [...selectedDayNumbers].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 220: Replace .sort()

**File:** app/src/islands/pages/ViewSplitLeasePage.jsx
**Line:** 1256
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedJsDays = [...daysInJsFormat].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 221: Replace for loop

**File:** app/src/islands/pages/ViewSplitLeasePage.jsx
**Line:** 1268
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < sortedJsDays.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 222: Replace .push()

**File:** app/src/islands/pages/WhySplitLeasePage.jsx
**Line:** 129
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
legacyPhotoIds.push(firstPhoto);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 223: Replace .sort()

**File:** app/src/islands/shared/CreateProposalFlowV2.jsx
**Line:** 257
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sorted = [...dayObjs].sort((a, b) => a.dayOfWeek - b.dayOfWeek);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 224: Replace for loop

**File:** app/src/islands/shared/CreateProposalFlowV2.jsx
**Line:** 267
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < dayNumbers.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 225: Replace .push()

**File:** app/src/islands/shared/ExternalReviews.jsx
**Line:** 60
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
acc[review.platform].push(review);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 226: Replace .push()

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 272
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
photoIds.push(...photosField);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 227: Replace .push()

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 277
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
photoIds.push(...parsed);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 228: Replace .push()

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 612
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
skippedInvalidCoordinates.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 229: Replace .push()

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 643
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 230: Replace .push()

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 705
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
skippedInvalidCoordinates.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 231: Replace .push()

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 733
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 232: Replace for loop

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 750
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
console.log(' GoogleMap: No all listings to create grey markers for (showAllListings:', showAllListings, ', listings.length:', listings?.length, ')');
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 233: Replace .sort()

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 319
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedDays = [...daysArray].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 234: Replace for loop

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 323
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sortedDays.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 235: Replace .sort()

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 344
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedUnselected = [...unselectedDays].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 236: Replace for loop

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 345
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sortedUnselected.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 237: Replace for loop

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 446
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < dayCount; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 238: Replace .sort()

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 546
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedDays = [...selectedDaysArray].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 239: Replace for loop

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 557
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < sortedDays.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 240: Replace mutation

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 585
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
checkoutDayIndex = sortedDays.filter(day => day < gapStart).pop();
```

**Refactored Code:**
```javascript
// Use immutable method
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 241: Replace .sort()

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 617
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const selectedDaysArray = Array.from(selectedDays).sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 242: Replace for loop

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 47
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const pattern of namePatterns) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 243: Replace for loop

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 111
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const pattern of standardPhonePatterns) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 244: Replace for loop

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 123
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const pattern of explicitPhonePatterns) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 245: Replace throw

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 217
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('VITE_SUPABASE_URL is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 246: Replace throw

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 277
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Email is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 247: Replace throw

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 282
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('Market research description is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 248: Replace throw

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 363
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('VITE_SUPABASE_URL is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 249: Replace throw

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 483
**Violation:** EXCEPTION_FOR_FLOW - Exception used for validation/expected errors
**Severity:** MEDIUM

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
throw new Error('VITE_SUPABASE_URL is required');
```

**Refactored Code:**
```javascript
return err("message")
```

**Why This Matters:**
Expected errors (validation, not found, etc.) should be return values, not exceptions. This makes error handling explicit and type-safe.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 250: Replace for loop

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 680
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (const topic of FREEFORM_TOPICS) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 251: Replace .push()

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 683
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
detectedTopics.push(topic.id);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 252: Replace .sort()

**File:** app/src/islands/shared/CreateProposalFlowV2Components/DaysSelectionSection.jsx
**Line:** 63
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sorted = [...dayNumbers].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 253: Replace for loop

**File:** app/src/islands/shared/CreateProposalFlowV2Components/DaysSelectionSection.jsx
**Line:** 72
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < sorted.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 254: Replace .push()

**File:** app/src/islands/shared/HostEditingProposal/ScheduleSelector.jsx
**Line:** 119
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (isSelected) classes.push('hss-selected')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 255: Replace .push()

**File:** app/src/islands/shared/HostEditingProposal/ScheduleSelector.jsx
**Line:** 120
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (!isAvailable) classes.push('hss-unavailable')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 256: Replace .push()

**File:** app/src/islands/shared/HostEditingProposal/ScheduleSelector.jsx
**Line:** 121
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (disabled) classes.push('hss-disabled')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 257: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 248
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('hss-selected')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 258: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 252
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('hss-non-contiguous')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 259: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 258
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('hss-unavailable')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 260: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 263
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('hss-disabled')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 261: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 301
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('hss-preview-mode')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 262: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 303
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('hss-step-by-step-mode')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 263: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 305
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('hss-proposal-mode')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 264: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 309
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push(className)
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 265: Replace .sort()

**File:** app/src/islands/shared/HostScheduleSelector/SimpleHostScheduleSelector.jsx
**Line:** 117
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const newSelection = [...selectedNights, nightId].sort((a, b) => {
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 266: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/SimpleHostScheduleSelector.jsx
**Line:** 145
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('shss-selected')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 267: Replace .push()

**File:** app/src/islands/shared/HostScheduleSelector/SimpleHostScheduleSelector.jsx
**Line:** 149
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('shss-disabled')
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 268: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 174
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 269: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 186
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 270: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 201
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 271: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 217
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 272: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 234
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 273: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 248
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 274: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 262
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 275: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 276
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 276: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 288
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 277: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 301
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 278: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 313
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 279: Replace .push()

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 323
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
items.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 280: Replace .push()

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 709
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (isOtherMonth) classNames.push('schedule-cohost-calendar-day--other');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 281: Replace .push()

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 710
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (isPast) classNames.push('schedule-cohost-calendar-day--past');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 282: Replace .push()

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 711
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (isActive) classNames.push('schedule-cohost-calendar-day--selected');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 283: Replace .push()

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 712
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (hasSlots) classNames.push('schedule-cohost-calendar-day--has-slots');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 284: Replace .push()

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 713
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (isTodayDate) classNames.push('schedule-cohost-calendar-day--today');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 285: Replace .push()

**File:** app/src/islands/shared/VirtualMeetingManager/BookTimeSlot.jsx
**Line:** 155
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('vm-date-button-active');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 286: Replace .push()

**File:** app/src/islands/shared/VirtualMeetingManager/BookTimeSlot.jsx
**Line:** 159
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
classes.push('vm-date-button-has-slots');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 287: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 529
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 288: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 530
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 289: Replace .sort()

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1022
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedJsDays = [...daysInJsFormat].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 290: Replace for loop

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1034
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < sortedJsDays.length - 1; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 291: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1248
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
roots.push(rootDesktop);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 292: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1254
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
roots.push(rootMobile);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 293: Replace .sort()

**File:** app/src/islands/pages/proposals/ProposalCard.jsx
**Line:** 121
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sorted = [...dayIndices].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 294: Replace for loop

**File:** app/src/islands/pages/proposals/ProposalCard.jsx
**Line:** 130
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 295: Replace while loop

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 45
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
while (current <= end) {
```

**Refactored Code:**
```javascript
// Use declarative pattern
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 296: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 46
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
dates.push(formatDateKey(current));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 297: Replace for loop

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 106
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = startPadding - 1; i >= 0; i--) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 298: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 109
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 299: Replace for loop

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 118
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i <= daysInMonth; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 300: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 120
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 301: Replace for loop

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 132
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i <= remaining; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 302: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 134
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push({
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 303: Replace .sort()

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 242
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
.sort();
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 304: Replace .sort()

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 253
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
.sort()
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 305: Replace mutation

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 254
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
.reverse(); // Most recent past dates first
```

**Refactored Code:**
```javascript
// Use immutable method
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 306: Replace for loop

**File:** app/src/islands/pages/ListingDashboardPage/components/NightlyPricingLegend.jsx
**Line:** 26
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = nightsPerWeekMin; i <= nightsPerWeekMax; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 307: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/NightlyPricingLegend.jsx
**Line:** 27
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
nightsRange.push(i);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 308: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 326
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Lease style: ${originalLeaseStyle}  ${selectedRentalType}`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 309: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 331
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Damage deposit: $${listing?.damageDeposit || 500}  $${damageDeposit}`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 310: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 334
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Maintenance fee: $${listing?.maintenanceFee || 125}  $${maintenanceFee}`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 311: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 342
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Available nights updated (${selectedNights.length} nights)`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 312: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 346
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Nights range: ${minNights}-${maxNights}`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 313: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 354
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push('Nightly rates updated');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 314: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 358
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Weekly rate: $${weeklyRate}/week`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 315: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 367
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Weekly pattern: ${patternLabels[weeksOffered] || weeksOffered}`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 316: Replace .push()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 371
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
changes.push(`Monthly rate: $${monthlyRate}/month`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 317: Replace .sort()

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 408
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const dayIndices = selectedNights.map((n) => nightMap[n]).sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 318: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/components/MapView.jsx
**Line:** 83
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
bounds.push(position);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 319: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/components/MapView.jsx
**Line:** 126
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 320: Replace while loop

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 49
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
while (current < checkOut) {
```

**Refactored Code:**
```javascript
// Use declarative pattern
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 321: Replace .push()

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 50
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push(current.getDay());
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 322: Replace .sort()

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 55
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const uniqueDays = Array.from(new Set(days)).sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 323: Replace .sort()

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 77
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
newSelectedDays = [...selectedDays, dayIndex].sort((a, b) => a - b);
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 324: Replace .sort()

**File:** app/src/islands/pages/AccountProfilePage/components/cards/ListingsCard.jsx
**Line:** 18
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const sortedPhotos = [...photos].sort((a, b) => (a.Order || 0) - (b.Order || 0));
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 325: Replace .sort()

**File:** app/src/islands/pages/AccountProfilePage/components/cards/ScheduleCommuteCard.jsx
**Line:** 38
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
.sort((a, b) => a - b)
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 326: Replace .sort()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 198
**Violation:** MUTATING_METHOD - Using mutating array sort/reverse
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
this.state.data.completedSections = Array.from(completedSections).sort();
```

**Refactored Code:**
```javascript
arr.toSorted((a, b) => a - b)
```

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 327: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 254
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
this.state.errors.push('Failed to save draft');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 328: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 364
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
this.state.errors.push(error);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 329: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 387
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Listing name is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 330: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 390
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Type of space is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 331: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 393
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Type of kitchen is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 332: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 396
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Type of parking is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 333: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 399
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Valid NYC address is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 334: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 404
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('At least one amenity inside unit is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 335: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 407
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Description of lodging is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 336: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 412
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Rental type is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 337: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 417
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('At least one available night must be selected');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 338: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 421
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Weekly pattern is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 339: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 426
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Damage deposit must be at least $500');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 340: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 429
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Monthly compensation is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 341: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 432
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Weekly compensation is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 342: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 438
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Nightly pricing is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 343: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 443
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Cancellation policy is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 344: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 446
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Check-in time is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 345: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 449
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Check-out time is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 346: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 454
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push(`At least ${data.photos.minRequired} photos are required`);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 347: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 93
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (nights.sunday) result.push('sunday');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 348: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 94
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (nights.monday) result.push('monday');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 349: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 95
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (nights.tuesday) result.push('tuesday');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 350: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 96
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (nights.wednesday) result.push('wednesday');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 351: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 97
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (nights.thursday) result.push('thursday');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 352: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 98
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (nights.friday) result.push('friday');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 353: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 99
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (nights.saturday) result.push('saturday');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 354: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 270
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (!payload.Name) errors.push('Name is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 355: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 271
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (!payload['Type of Space']) errors.push('Type of Space is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 356: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 272
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (!payload.Address) errors.push('Address is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 357: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 273
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
if (!payload['Rental Type']) errors.push('Rental Type is required');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 358: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 277
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Monthly Compensation is required for Monthly rentals');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 359: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 280
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Weekly Compensation is required for Weekly rentals');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 360: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 283
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Nightly pricing is required for Nightly rentals');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 361: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 288
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errors.push('Damage Deposit must be at least $500');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 362: Replace for loop

**File:** app/src/islands/pages/RentalApplicationPage/utils/rentalApplicationFieldMapper.ts
**Line:** 401
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let step = 1; step <= 7; step++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 363: Replace .push()

**File:** app/src/islands/pages/RentalApplicationPage/utils/rentalApplicationFieldMapper.ts
**Line:** 403
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
completed.push(step);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 364: Replace for loop

**File:** app/src/islands/pages/SelfListingPageV2/SelfListingPageV2.tsx
**Line:** 518
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < 7; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 365: Replace .push()

**File:** app/src/islands/pages/SelfListingPageV2/SelfListingPageV2.tsx
**Line:** 519
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
prices.push(Math.ceil(prices[i - 1] * clampedDecay));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 366: Replace for loop

**File:** app/src/islands/pages/SelfListingPageV2/SelfListingPageV2.tsx
**Line:** 526
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < numNights && i < prices.length; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 367: Replace for loop

**File:** app/src/islands/pages/SelfListingPage/components/NightlyPriceSlider.tsx
**Line:** 70
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 1; i < N; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 368: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/components/NightlyPriceSlider.tsx
**Line:** 71
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
prices.push(roundUp(prices[i - 1] * decay));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 369: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 291
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('listingName');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 370: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 294
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('listingName');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 371: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 299
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('typeOfSpace');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 372: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 304
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('bedrooms');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 373: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 309
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('typeOfKitchen');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 374: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 314
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('typeOfParking');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 375: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 319
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('bathrooms');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 376: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 325
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('fullAddress');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 377: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 329
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('fullAddress');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 378: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 334
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('state');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 379: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section2Features.tsx
**Line:** 207
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('amenitiesInsideUnit');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 380: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section2Features.tsx
**Line:** 212
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('descriptionOfLodging');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 381: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section3LeaseStyles.tsx
**Line:** 132
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('weeklyPattern');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 382: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section3LeaseStyles.tsx
**Line:** 137
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('subsidyAgreement');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 383: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 50
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('monthlyCompensation');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 384: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 55
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('weeklyCompensation');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 385: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 60
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('nightlyPricing');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 386: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 67
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('damageDeposit');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 387: Replace while loop

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 103
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
while (current <= end) {
```

**Refactored Code:**
```javascript
// Use declarative pattern
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 388: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 104
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
dates.push(new Date(current));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 389: Replace for loop

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 141
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let i = 0; i < startingDayOfWeek; i++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 390: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 142
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push(null);
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 391: Replace for loop

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 146
**Violation:** IMPERATIVE_LOOP - Imperative loop found (consider map/filter/reduce)
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
for (let d = 1; d <= daysInMonth; d++) {
```

**Refactored Code:**
```javascript
items.map(x => transform(x))
```

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 392: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 147
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
days.push(new Date(year, month, d));
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 393: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 178
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('cancellationPolicy');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 394: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 183
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('idealMinDuration');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 395: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 188
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('idealMaxDuration');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 396: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 194
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('idealMaxDuration');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 397: Replace mutation

**File:** app/src/islands/pages/SelfListingPage/sections/Section6Photos.tsx
**Line:** 48
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
const extension = file.name.split('.').pop()?.toLowerCase() || 'jpg';
```

**Refactored Code:**
```javascript
// Use immutable method
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~

## CHUNK 398: Replace .push()

**File:** app/src/islands/pages/SelfListingPage/sections/Section6Photos.tsx
**Line:** 266
**Violation:** MUTATING_METHOD - Using mutating array method
**Severity:** HIGH

**Expected Affected Pages:** AUTO

**Current Code:**
```javascript
errorOrder.push('photos');
```

**Refactored Code:**
```javascript
const newArr = [...arr, item];
```

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Run related tests
- [ ] Verify functionality
- [ ] Check console

~~~~~
