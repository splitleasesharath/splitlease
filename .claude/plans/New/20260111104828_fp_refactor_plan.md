# Functional Programming Refactoring Plan

Date: 2026-01-11
Target: agents/20260111104828_fp_audit_violations.json
Severity Filter: high

## Executive Summary

**Total Violations:** 349
**Files Affected:** 84

### Breakdown by Type

| Violation Type | Count | % |
|----------------|-------|---|
| MUTATING_METHOD | 264 | 75.6% |
| IMPERATIVE_LOOP | 80 | 22.9% |
| IO_IN_CORE | 5 | 1.4% |

### Top 10 Files by Violation Count

| File | Violations |
|------|------------|
| src\islands\pages\SelfListingPage\store\listingLocalStore.ts | 21 |
| src\islands\pages\SelfListingPage\store\prepareListingSubmission.ts | 15 |
| src\lib\availabilityValidation.js | 15 |
| src\islands\shared\LoggedInAvatar\LoggedInAvatar.jsx | 12 |
| src\islands\pages\ListingDashboardPage\components\AvailabilitySection.jsx | 11 |
| src\islands\pages\ListingDashboardPage\components\PricingEditSection.jsx | 10 |
| src\islands\pages\SelfListingPage\sections\Section1SpaceSnapshot.tsx | 10 |
| src\islands\pages\SelfListingPage\sections\Section5Rules.tsx | 10 |
| src\islands\shared\SearchScheduleSelector.jsx | 9 |
| src\islands\pages\SearchPage.jsx | 8 |

---

~~~~~

## CHUNK 1: Replace imperative loop at generate-redirects.js:144

**File:** app/scripts/generate-redirects.js
**Line:** 144
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** N/A (build script)

**Current Code:**
```javascript
for (const route of routes) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify generate-redirects component/function still works correctly
- [ ] Check affected pages: N/A (build script)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 2: Replace mutating method at generate-redirects.js:147

**File:** app/scripts/generate-redirects.js
**Line:** 147
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** N/A (build script)

**Current Code:**
```javascript
errors.push(`Duplicate path: ${route.path}`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify generate-redirects component/function still works correctly
- [ ] Check affected pages: N/A (build script)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 3: Replace mutating method at generate-redirects.js:153

**File:** app/scripts/generate-redirects.js
**Line:** 153
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** N/A (build script)

**Current Code:**
```javascript
errors.push(`Route missing path`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify generate-redirects component/function still works correctly
- [ ] Check affected pages: N/A (build script)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 4: Replace mutating method at generate-redirects.js:156

**File:** app/scripts/generate-redirects.js
**Line:** 156
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** N/A (build script)

**Current Code:**
```javascript
errors.push(`Route ${route.path} missing file`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify generate-redirects component/function still works correctly
- [ ] Check affected pages: N/A (build script)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 5: Replace mutating method at generate-redirects.js:161

**File:** app/scripts/generate-redirects.js
**Line:** 161
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** N/A (build script)

**Current Code:**
```javascript
errors.push(`Route ${route.path} has cloudflareInternal but no internalName`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify generate-redirects component/function still works correctly
- [ ] Check affected pages: N/A (build script)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 6: Replace mutating method at helpCenterData.js:280

**File:** app/src/data/helpCenterData.js
**Line:** 280
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /help-center

**Current Code:**
```javascript
results.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify helpCenterData component/function still works correctly
- [ ] Check affected pages: /help-center
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 7: Replace mutating method at FullscreenProposalMapModal.jsx:357

**File:** app/src/islands/modals/FullscreenProposalMapModal.jsx
**Line:** 357
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals, /guest-proposals

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify FullscreenProposalMapModal component/function still works correctly
- [ ] Check affected pages: /host-proposals, /guest-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 8: Replace mutating method at ListingsCard.jsx:18

**File:** app/src/islands/pages/AccountProfilePage/components/cards/ListingsCard.jsx
**Line:** 18
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
const sortedPhotos = [...photos].sort((a, b) => (a.Order || 0) - (b.Order || 0));
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify ListingsCard component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 9: Replace mutating method at ScheduleCommuteCard.jsx:38

**File:** app/src/islands/pages/AccountProfilePage/components/cards/ScheduleCommuteCard.jsx
**Line:** 38
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
.sort((a, b) => a - b)
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify ScheduleCommuteCard component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 10: Replace mutating method at useAccountProfilePageLogic.js:99

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 99
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
actions.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useAccountProfilePageLogic component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 11: Replace mutating method at useAccountProfilePageLogic.js:107

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 107
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
actions.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useAccountProfilePageLogic component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 12: Replace mutating method at useAccountProfilePageLogic.js:115

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 115
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
actions.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useAccountProfilePageLogic component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 13: Replace mutating method at useAccountProfilePageLogic.js:123

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 123
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
actions.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useAccountProfilePageLogic component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 14: Replace mutating method at useAccountProfilePageLogic.js:131

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 131
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
actions.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useAccountProfilePageLogic component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 15: Replace mutating method at useAccountProfilePageLogic.js:718

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 718
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
: [...currentDays, dayIndex].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify useAccountProfilePageLogic component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 16: Replace mutating method at useAccountProfilePageLogic.js:964

**File:** app/src/islands/pages/AccountProfilePage/useAccountProfilePageLogic.js
**Line:** 964
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
const fileExtension = file.name.split('.').pop()?.toLowerCase() || 'jpg';
```

**Refactoring Guidance:**
Use slice: `arr.slice(0, -1)` to get all but last

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useAccountProfilePageLogic component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 17: Replace imperative loop at FAQPage.jsx:77

**File:** app/src/islands/pages/FAQPage.jsx
**Line:** 77
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /faq

**Current Code:**
```javascript
for (const [tabName, dbCategory] of Object.entries(categoryMapping)) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify FAQPage component/function still works correctly
- [ ] Check affected pages: /faq
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 18: Replace mutating method at FAQPage.jsx:79

**File:** app/src/islands/pages/FAQPage.jsx
**Line:** 79
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /faq

**Current Code:**
```javascript
grouped[tabName].push(faq);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify FAQPage component/function still works correctly
- [ ] Check affected pages: /faq
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 19: Replace mutating method at FAQPage.jsx:356

**File:** app/src/islands/pages/FAQPage.jsx
**Line:** 356
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /faq

**Current Code:**
```javascript
faqsBySubCategory[subCat].push(faq);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify FAQPage component/function still works correctly
- [ ] Check affected pages: /faq
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 20: Replace mutating method at FavoriteListingsPage.jsx:529

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 529
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify FavoriteListingsPage component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 21: Replace mutating method at FavoriteListingsPage.jsx:530

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 530
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify FavoriteListingsPage component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 22: Replace mutating method at FavoriteListingsPage.jsx:1022

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1022
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
const sortedJsDays = [...daysInJsFormat].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify FavoriteListingsPage component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 23: Replace imperative loop at FavoriteListingsPage.jsx:1034

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1034
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
for (let i = 0; i < sortedJsDays.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify FavoriteListingsPage component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 24: Replace mutating method at FavoriteListingsPage.jsx:1248

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1248
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
roots.push(rootDesktop);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify FavoriteListingsPage component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 25: Replace mutating method at FavoriteListingsPage.jsx:1254

**File:** app/src/islands/pages/FavoriteListingsPage/FavoriteListingsPage.jsx
**Line:** 1254
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
roots.push(rootMobile);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify FavoriteListingsPage component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 26: Replace mutating method at MapView.jsx:83

**File:** app/src/islands/pages/FavoriteListingsPage/components/MapView.jsx
**Line:** 83
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
bounds.push(position);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify MapView component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 27: Replace mutating method at MapView.jsx:126

**File:** app/src/islands/pages/FavoriteListingsPage/components/MapView.jsx
**Line:** 126
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify MapView component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 28: Replace imperative loop at SplitScheduleSelector.jsx:49

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 49
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
while (current < checkOut) {
```

**Refactoring Guidance:**
Consider `Array.from()` with iterator, or generator function, or reduce pattern

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SplitScheduleSelector component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 29: Replace mutating method at SplitScheduleSelector.jsx:50

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 50
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
days.push(current.getDay());
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SplitScheduleSelector component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 30: Replace mutating method at SplitScheduleSelector.jsx:55

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 55
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
const uniqueDays = Array.from(new Set(days)).sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SplitScheduleSelector component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 31: Replace mutating method at SplitScheduleSelector.jsx:77

**File:** app/src/islands/pages/FavoriteListingsPage/components/SplitScheduleSelector.jsx
**Line:** 77
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
newSelectedDays = [...selectedDays, dayIndex].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SplitScheduleSelector component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 32: Replace mutating method at formatters.js:66

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 66
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
parts.push('1 bedroom');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify formatters component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 33: Replace mutating method at formatters.js:70

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 70
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
parts.push(`${bedrooms} bedrooms`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify formatters component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 34: Replace mutating method at formatters.js:76

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 76
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
parts.push(bathroomDisplay);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify formatters component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 35: Replace mutating method at formatters.js:81

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 81
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
parts.push(kitchenType);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify formatters component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 36: Replace mutating method at formatters.js:115

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 115
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
if (borough) parts.push(borough);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify formatters component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 37: Replace mutating method at formatters.js:116

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 116
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
if (hood) parts.push(hood);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify formatters component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 38: Replace mutating method at formatters.js:117

**File:** app/src/islands/pages/FavoriteListingsPage/formatters.js
**Line:** 117
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /favorite-listings

**Current Code:**
```javascript
if (city) parts.push(city);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify formatters component/function still works correctly
- [ ] Check affected pages: /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 39: Replace mutating method at HomePage.jsx:346

**File:** app/src/islands/pages/HomePage.jsx
**Line:** 346
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /

**Current Code:**
```javascript
legacyPhotoIds.push(firstPhoto);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HomePage component/function still works correctly
- [ ] Check affected pages: /
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 40: Replace mutating method at useHostOverviewPageLogic.js:154

**File:** app/src/islands/pages/HostOverviewPage/useHostOverviewPageLogic.js
**Line:** 154
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-overview

**Current Code:**
```javascript
fetchPromises.push(
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useHostOverviewPageLogic component/function still works correctly
- [ ] Check affected pages: /host-overview
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 41: Replace mutating method at useHostOverviewPageLogic.js:182

**File:** app/src/islands/pages/HostOverviewPage/useHostOverviewPageLogic.js
**Line:** 182
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-overview

**Current Code:**
```javascript
fetchPromises.push(
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useHostOverviewPageLogic component/function still works correctly
- [ ] Check affected pages: /host-overview
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 42: Replace mutating method at useHostOverviewPageLogic.js:198

**File:** app/src/islands/pages/HostOverviewPage/useHostOverviewPageLogic.js
**Line:** 198
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-overview

**Current Code:**
```javascript
fetchPromises.push(
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useHostOverviewPageLogic component/function still works correctly
- [ ] Check affected pages: /host-overview
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 43: Replace imperative loop at types.js:253

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 253
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
while (current !== checkOutIndex) {
```

**Refactoring Guidance:**
Consider `Array.from()` with iterator, or generator function, or reduce pattern

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 44: Replace mutating method at types.js:254

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 254
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
activeDays.push(dayNames[current]);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 45: Replace mutating method at types.js:342

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 342
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
const sorted = [...dayIndices].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 46: Replace imperative loop at types.js:351

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 351
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 47: Replace mutating method at types.js:411

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 411
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
.sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 48: Replace imperative loop at types.js:423

**File:** app/src/islands/pages/HostProposalsPage/types.js
**Line:** 423
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
for (let i = 1; i < sortedNights.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 49: Replace mutating method at useHostProposalsPageLogic.js:266

**File:** app/src/islands/pages/HostProposalsPage/useHostProposalsPageLogic.js
**Line:** 266
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
const sortedListings = [...listingsResult].sort((a, b) => {
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify useHostProposalsPageLogic component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 50: Replace imperative loop at ListWithUsPage.jsx:27

**File:** app/src/islands/pages/ListWithUsPage.jsx
**Line:** 27
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /list-with-us

**Current Code:**
```javascript
for (let i = 1; i < 7; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify ListWithUsPage component/function still works correctly
- [ ] Check affected pages: /list-with-us
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 51: Replace mutating method at ListWithUsPage.jsx:28

**File:** app/src/islands/pages/ListWithUsPage.jsx
**Line:** 28
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /list-with-us

**Current Code:**
```javascript
prices.push(Math.ceil(prices[i - 1] * clampedDecay));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ListWithUsPage component/function still works correctly
- [ ] Check affected pages: /list-with-us
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 52: Replace imperative loop at AvailabilitySection.jsx:45

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 45
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
while (current <= end) {
```

**Refactoring Guidance:**
Consider `Array.from()` with iterator, or generator function, or reduce pattern

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 53: Replace mutating method at AvailabilitySection.jsx:46

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 46
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
dates.push(formatDateKey(current));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 54: Replace imperative loop at AvailabilitySection.jsx:106

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 106
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (let i = startPadding - 1; i >= 0; i--) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 55: Replace mutating method at AvailabilitySection.jsx:109

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 109
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
days.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 56: Replace imperative loop at AvailabilitySection.jsx:118

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 118
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (let i = 1; i <= daysInMonth; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 57: Replace mutating method at AvailabilitySection.jsx:120

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 120
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
days.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 58: Replace imperative loop at AvailabilitySection.jsx:132

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 132
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (let i = 1; i <= remaining; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 59: Replace mutating method at AvailabilitySection.jsx:134

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 134
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
days.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 60: Replace mutating method at AvailabilitySection.jsx:242

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 242
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
.sort();
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 61: Replace mutating method at AvailabilitySection.jsx:253

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 253
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
.sort()
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 62: Replace mutating method at AvailabilitySection.jsx:254

**File:** app/src/islands/pages/ListingDashboardPage/components/AvailabilitySection.jsx
**Line:** 254
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
.reverse(); // Most recent past dates first
```

**Refactoring Guidance:**
Use `.toReversed()` (ES2023) or `[...arr].reverse()`

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify AvailabilitySection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 63: Replace imperative loop at NightlyPricingLegend.jsx:26

**File:** app/src/islands/pages/ListingDashboardPage/components/NightlyPricingLegend.jsx
**Line:** 26
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (let i = nightsPerWeekMin; i <= nightsPerWeekMax; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify NightlyPricingLegend component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 64: Replace mutating method at NightlyPricingLegend.jsx:27

**File:** app/src/islands/pages/ListingDashboardPage/components/NightlyPricingLegend.jsx
**Line:** 27
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
nightsRange.push(i);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify NightlyPricingLegend component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 65: Replace mutating method at PricingEditSection.jsx:326

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 326
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Lease style: ${originalLeaseStyle}  ${selectedRentalType}`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 66: Replace mutating method at PricingEditSection.jsx:331

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 331
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Damage deposit: $${listing?.damageDeposit || 500}  $${damageDeposit}`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 67: Replace mutating method at PricingEditSection.jsx:334

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 334
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Maintenance fee: $${listing?.maintenanceFee || 125}  $${maintenanceFee}`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 68: Replace mutating method at PricingEditSection.jsx:342

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 342
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Available nights updated (${selectedNights.length} nights)`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 69: Replace mutating method at PricingEditSection.jsx:346

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 346
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Nights range: ${minNights}-${maxNights}`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 70: Replace mutating method at PricingEditSection.jsx:354

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 354
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push('Nightly rates updated');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 71: Replace mutating method at PricingEditSection.jsx:358

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 358
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Weekly rate: $${weeklyRate}/week`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 72: Replace mutating method at PricingEditSection.jsx:367

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 367
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Weekly pattern: ${patternLabels[weeksOffered] || weeksOffered}`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 73: Replace mutating method at PricingEditSection.jsx:371

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 371
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
changes.push(`Monthly rate: $${monthlyRate}/month`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 74: Replace mutating method at PricingEditSection.jsx:408

**File:** app/src/islands/pages/ListingDashboardPage/components/PricingEditSection.jsx
**Line:** 408
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
const dayIndices = selectedNights.map((n) => nightMap[n]).sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify PricingEditSection component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 75: Replace imperative loop at useListingDashboardPageLogic.js:920

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 920
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (const [key, value] of Object.entries(updates)) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify useListingDashboardPageLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 76: Replace mutating method at useListingDashboardPageLogic.js:1269

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 1269
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
newPhotos.unshift(selectedPhoto);
```

**Refactoring Guidance:**
Use spread at beginning: `[item, ...arr]`

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useListingDashboardPageLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 77: Replace imperative loop at useListingDashboardPageLogic.js:1295

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 1295
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (let i = 0; i < newPhotos.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify useListingDashboardPageLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 78: Replace imperative loop at useListingDashboardPageLogic.js:1338

**File:** app/src/islands/pages/ListingDashboardPage/useListingDashboardPageLogic.js
**Line:** 1338
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (let i = 0; i < newPhotos.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify useListingDashboardPageLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 79: Replace imperative loop at PreviewSplitLeasePage.jsx:841

**File:** app/src/islands/pages/PreviewSplitLeasePage.jsx
**Line:** 841
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /preview-split-lease

**Current Code:**
```javascript
for (const [key, value] of Object.entries(updates)) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify PreviewSplitLeasePage component/function still works correctly
- [ ] Check affected pages: /preview-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 80: Replace imperative loop at rentalApplicationFieldMapper.ts:401

**File:** app/src/islands/pages/RentalApplicationPage/utils/rentalApplicationFieldMapper.ts
**Line:** 401
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /rental-application

**Current Code:**
```javascript
for (let step = 1; step <= 7; step++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify rentalApplicationFieldMapper component/function still works correctly
- [ ] Check affected pages: /rental-application
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 81: Replace mutating method at rentalApplicationFieldMapper.ts:403

**File:** app/src/islands/pages/RentalApplicationPage/utils/rentalApplicationFieldMapper.ts
**Line:** 403
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /rental-application

**Current Code:**
```javascript
completed.push(step);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify rentalApplicationFieldMapper component/function still works correctly
- [ ] Check affected pages: /rental-application
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 82: Replace mutating method at SearchPage.jsx:89

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 89
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
const sortedDays = [...selectedDaysArray].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 83: Replace imperative loop at SearchPage.jsx:99

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 99
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search

**Current Code:**
```javascript
for (let i = 1; i < sortedDays.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 84: Replace mutating method at SearchPage.jsx:1979

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 1979
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 85: Replace mutating method at SearchPage.jsx:1980

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 1980
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 86: Replace mutating method at SearchPage.jsx:2318

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2318
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
const sortedJsDays = [...daysInJsFormat].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 87: Replace imperative loop at SearchPage.jsx:2330

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2330
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search

**Current Code:**
```javascript
for (let i = 0; i < sortedJsDays.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 88: Replace mutating method at SearchPage.jsx:2632

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2632
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
roots.push(rootDesktop);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 89: Replace mutating method at SearchPage.jsx:2638

**File:** app/src/islands/pages/SearchPage.jsx
**Line:** 2638
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
roots.push(rootMobile);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPage component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 90: Replace mutating method at SearchPageTest.jsx:1273

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1273
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search (test)

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPageTest component/function still works correctly
- [ ] Check affected pages: /search (test)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 91: Replace mutating method at SearchPageTest.jsx:1274

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1274
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search (test)

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPageTest component/function still works correctly
- [ ] Check affected pages: /search (test)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 92: Replace mutating method at SearchPageTest.jsx:1474

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1474
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search (test)

**Current Code:**
```javascript
roots.push(rootDesktop);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPageTest component/function still works correctly
- [ ] Check affected pages: /search (test)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 93: Replace mutating method at SearchPageTest.jsx:1480

**File:** app/src/islands/pages/SearchPageTest.jsx
**Line:** 1480
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search (test)

**Current Code:**
```javascript
roots.push(rootMobile);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchPageTest component/function still works correctly
- [ ] Check affected pages: /search (test)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 94: Replace imperative loop at SelfListingPageV2.tsx:518

**File:** app/src/islands/pages/SelfListingPageV2/SelfListingPageV2.tsx
**Line:** 518
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
for (let i = 1; i < 7; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SelfListingPageV2 component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 95: Replace mutating method at SelfListingPageV2.tsx:519

**File:** app/src/islands/pages/SelfListingPageV2/SelfListingPageV2.tsx
**Line:** 519
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
prices.push(Math.ceil(prices[i - 1] * clampedDecay));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SelfListingPageV2 component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 96: Replace imperative loop at SelfListingPageV2.tsx:526

**File:** app/src/islands/pages/SelfListingPageV2/SelfListingPageV2.tsx
**Line:** 526
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
for (let i = 0; i < numNights && i < prices.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SelfListingPageV2 component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 97: Replace imperative loop at NightlyPriceSlider.tsx:70

**File:** app/src/islands/pages/SelfListingPage/components/NightlyPriceSlider.tsx
**Line:** 70
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
for (let i = 1; i < N; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify NightlyPriceSlider component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 98: Replace mutating method at NightlyPriceSlider.tsx:71

**File:** app/src/islands/pages/SelfListingPage/components/NightlyPriceSlider.tsx
**Line:** 71
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
prices.push(roundUp(prices[i - 1] * decay));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify NightlyPriceSlider component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 99: Replace mutating method at Section1SpaceSnapshot.tsx:291

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 291
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('listingName');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 100: Replace mutating method at Section1SpaceSnapshot.tsx:294

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 294
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('listingName');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 101: Replace mutating method at Section1SpaceSnapshot.tsx:299

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 299
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('typeOfSpace');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 102: Replace mutating method at Section1SpaceSnapshot.tsx:304

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 304
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('bedrooms');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 103: Replace mutating method at Section1SpaceSnapshot.tsx:309

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 309
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('typeOfKitchen');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 104: Replace mutating method at Section1SpaceSnapshot.tsx:314

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 314
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('typeOfParking');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 105: Replace mutating method at Section1SpaceSnapshot.tsx:319

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 319
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('bathrooms');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 106: Replace mutating method at Section1SpaceSnapshot.tsx:325

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 325
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('fullAddress');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 107: Replace mutating method at Section1SpaceSnapshot.tsx:329

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 329
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('fullAddress');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 108: Replace mutating method at Section1SpaceSnapshot.tsx:334

**File:** app/src/islands/pages/SelfListingPage/sections/Section1SpaceSnapshot.tsx
**Line:** 334
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('state');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section1SpaceSnapshot component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 109: Replace mutating method at Section2Features.tsx:207

**File:** app/src/islands/pages/SelfListingPage/sections/Section2Features.tsx
**Line:** 207
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('amenitiesInsideUnit');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section2Features component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 110: Replace mutating method at Section2Features.tsx:212

**File:** app/src/islands/pages/SelfListingPage/sections/Section2Features.tsx
**Line:** 212
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('descriptionOfLodging');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section2Features component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 111: Replace mutating method at Section3LeaseStyles.tsx:132

**File:** app/src/islands/pages/SelfListingPage/sections/Section3LeaseStyles.tsx
**Line:** 132
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('weeklyPattern');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section3LeaseStyles component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 112: Replace mutating method at Section3LeaseStyles.tsx:137

**File:** app/src/islands/pages/SelfListingPage/sections/Section3LeaseStyles.tsx
**Line:** 137
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('subsidyAgreement');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section3LeaseStyles component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 113: Replace mutating method at Section4Pricing.tsx:50

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 50
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('monthlyCompensation');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section4Pricing component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 114: Replace mutating method at Section4Pricing.tsx:55

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 55
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('weeklyCompensation');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section4Pricing component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 115: Replace mutating method at Section4Pricing.tsx:60

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 60
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('nightlyPricing');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section4Pricing component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 116: Replace mutating method at Section4Pricing.tsx:67

**File:** app/src/islands/pages/SelfListingPage/sections/Section4Pricing.tsx
**Line:** 67
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('damageDeposit');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section4Pricing component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 117: Replace imperative loop at Section5Rules.tsx:103

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 103
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
while (current <= end) {
```

**Refactoring Guidance:**
Consider `Array.from()` with iterator, or generator function, or reduce pattern

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 118: Replace mutating method at Section5Rules.tsx:104

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 104
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
dates.push(new Date(current));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 119: Replace imperative loop at Section5Rules.tsx:141

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 141
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
for (let i = 0; i < startingDayOfWeek; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 120: Replace mutating method at Section5Rules.tsx:142

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 142
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
days.push(null);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 121: Replace imperative loop at Section5Rules.tsx:146

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 146
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
for (let d = 1; d <= daysInMonth; d++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 122: Replace mutating method at Section5Rules.tsx:147

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 147
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
days.push(new Date(year, month, d));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 123: Replace mutating method at Section5Rules.tsx:178

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 178
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('cancellationPolicy');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 124: Replace mutating method at Section5Rules.tsx:183

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 183
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('idealMinDuration');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 125: Replace mutating method at Section5Rules.tsx:188

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 188
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('idealMaxDuration');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 126: Replace mutating method at Section5Rules.tsx:194

**File:** app/src/islands/pages/SelfListingPage/sections/Section5Rules.tsx
**Line:** 194
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('idealMaxDuration');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section5Rules component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 127: Replace mutating method at Section6Photos.tsx:48

**File:** app/src/islands/pages/SelfListingPage/sections/Section6Photos.tsx
**Line:** 48
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
const extension = file.name.split('.').pop()?.toLowerCase() || 'jpg';
```

**Refactoring Guidance:**
Use slice: `arr.slice(0, -1)` to get all but last

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section6Photos component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 128: Replace mutating method at Section6Photos.tsx:266

**File:** app/src/islands/pages/SelfListingPage/sections/Section6Photos.tsx
**Line:** 266
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errorOrder.push('photos');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify Section6Photos component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 129: Replace mutating method at listingLocalStore.ts:198

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 198
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
this.state.data.completedSections = Array.from(completedSections).sort();
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 130: Replace mutating method at listingLocalStore.ts:254

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 254
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
this.state.errors.push('Failed to save draft');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 131: Replace mutating method at listingLocalStore.ts:364

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 364
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
this.state.errors.push(error);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 132: Replace mutating method at listingLocalStore.ts:387

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 387
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Listing name is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 133: Replace mutating method at listingLocalStore.ts:390

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 390
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Type of space is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 134: Replace mutating method at listingLocalStore.ts:393

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 393
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Type of kitchen is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 135: Replace mutating method at listingLocalStore.ts:396

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 396
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Type of parking is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 136: Replace mutating method at listingLocalStore.ts:399

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 399
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Valid NYC address is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 137: Replace mutating method at listingLocalStore.ts:404

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 404
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('At least one amenity inside unit is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 138: Replace mutating method at listingLocalStore.ts:407

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 407
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Description of lodging is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 139: Replace mutating method at listingLocalStore.ts:412

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 412
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Rental type is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 140: Replace mutating method at listingLocalStore.ts:417

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 417
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('At least one available night must be selected');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 141: Replace mutating method at listingLocalStore.ts:421

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 421
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Weekly pattern is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 142: Replace mutating method at listingLocalStore.ts:426

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 426
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Damage deposit must be at least $500');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 143: Replace mutating method at listingLocalStore.ts:429

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 429
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Monthly compensation is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 144: Replace mutating method at listingLocalStore.ts:432

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 432
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Weekly compensation is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 145: Replace mutating method at listingLocalStore.ts:438

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 438
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Nightly pricing is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 146: Replace mutating method at listingLocalStore.ts:443

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 443
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Cancellation policy is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 147: Replace mutating method at listingLocalStore.ts:446

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 446
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Check-in time is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 148: Replace mutating method at listingLocalStore.ts:449

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 449
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Check-out time is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 149: Replace mutating method at listingLocalStore.ts:454

**File:** app/src/islands/pages/SelfListingPage/store/listingLocalStore.ts
**Line:** 454
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push(`At least ${data.photos.minRequired} photos are required`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingLocalStore component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 150: Replace mutating method at prepareListingSubmission.ts:93

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 93
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (nights.sunday) result.push('sunday');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 151: Replace mutating method at prepareListingSubmission.ts:94

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 94
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (nights.monday) result.push('monday');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 152: Replace mutating method at prepareListingSubmission.ts:95

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 95
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (nights.tuesday) result.push('tuesday');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 153: Replace mutating method at prepareListingSubmission.ts:96

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 96
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (nights.wednesday) result.push('wednesday');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 154: Replace mutating method at prepareListingSubmission.ts:97

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 97
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (nights.thursday) result.push('thursday');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 155: Replace mutating method at prepareListingSubmission.ts:98

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 98
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (nights.friday) result.push('friday');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 156: Replace mutating method at prepareListingSubmission.ts:99

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 99
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (nights.saturday) result.push('saturday');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 157: Replace mutating method at prepareListingSubmission.ts:270

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 270
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (!payload.Name) errors.push('Name is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 158: Replace mutating method at prepareListingSubmission.ts:271

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 271
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (!payload['Type of Space']) errors.push('Type of Space is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 159: Replace mutating method at prepareListingSubmission.ts:272

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 272
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (!payload.Address) errors.push('Address is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 160: Replace mutating method at prepareListingSubmission.ts:273

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 273
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
if (!payload['Rental Type']) errors.push('Rental Type is required');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 161: Replace mutating method at prepareListingSubmission.ts:277

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 277
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Monthly Compensation is required for Monthly rentals');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 162: Replace mutating method at prepareListingSubmission.ts:280

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 280
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Weekly Compensation is required for Weekly rentals');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 163: Replace mutating method at prepareListingSubmission.ts:283

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 283
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Nightly pricing is required for Nightly rentals');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 164: Replace mutating method at prepareListingSubmission.ts:288

**File:** app/src/islands/pages/SelfListingPage/store/prepareListingSubmission.ts
**Line:** 288
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing

**Current Code:**
```javascript
errors.push('Damage Deposit must be at least $500');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify prepareListingSubmission component/function still works correctly
- [ ] Check affected pages: /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 165: Replace mutating method at ViewSplitLeasePage-old.jsx:250

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 250
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease (legacy)

**Current Code:**
```javascript
features.push({ icon: 'chef-hat', text: listing['Kitchen Type'] });
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ViewSplitLeasePage-old component/function still works correctly
- [ ] Check affected pages: /view-split-lease (legacy)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 166: Replace mutating method at ViewSplitLeasePage-old.jsx:256

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 256
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease (legacy)

**Current Code:**
```javascript
features.push({ icon: 'bath', text: `${count} ${text}` });
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ViewSplitLeasePage-old component/function still works correctly
- [ ] Check affected pages: /view-split-lease (legacy)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 167: Replace mutating method at ViewSplitLeasePage-old.jsx:260

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 260
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease (legacy)

**Current Code:**
```javascript
features.push({ icon: 'home', text: listing.resolvedTypeOfSpace });
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ViewSplitLeasePage-old component/function still works correctly
- [ ] Check affected pages: /view-split-lease (legacy)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 168: Replace mutating method at ViewSplitLeasePage-old.jsx:266

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 266
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease (legacy)

**Current Code:**
```javascript
features.push({ icon: 'bed-double', text: `${count} ${text}` });
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ViewSplitLeasePage-old component/function still works correctly
- [ ] Check affected pages: /view-split-lease (legacy)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 169: Replace mutating method at ViewSplitLeasePage-old.jsx:1170

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 1170
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease (legacy)

**Current Code:**
```javascript
const sortedPhotos = (photosData || []).sort((a, b) => {
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify ViewSplitLeasePage-old component/function still works correctly
- [ ] Check affected pages: /view-split-lease (legacy)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 170: Replace mutating method at ViewSplitLeasePage-old.jsx:1207

**File:** app/src/islands/pages/ViewSplitLeasePage-old.jsx
**Line:** 1207
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease (legacy)

**Current Code:**
```javascript
return [...prev, dayIndex].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify ViewSplitLeasePage-old component/function still works correctly
- [ ] Check affected pages: /view-split-lease (legacy)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 171: Replace mutating method at ViewSplitLeasePage.jsx:798

**File:** app/src/islands/pages/ViewSplitLeasePage.jsx
**Line:** 798
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
const sortedDays = [...selectedDayNumbers].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify ViewSplitLeasePage component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 172: Replace mutating method at ViewSplitLeasePage.jsx:1256

**File:** app/src/islands/pages/ViewSplitLeasePage.jsx
**Line:** 1256
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
const sortedJsDays = [...daysInJsFormat].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify ViewSplitLeasePage component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 173: Replace imperative loop at ViewSplitLeasePage.jsx:1268

**File:** app/src/islands/pages/ViewSplitLeasePage.jsx
**Line:** 1268
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
for (let i = 0; i < sortedJsDays.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify ViewSplitLeasePage component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 174: Replace mutating method at WhySplitLeasePage.jsx:129

**File:** app/src/islands/pages/WhySplitLeasePage.jsx
**Line:** 129
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /why-split-lease

**Current Code:**
```javascript
legacyPhotoIds.push(firstPhoto);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify WhySplitLeasePage component/function still works correctly
- [ ] Check affected pages: /why-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 175: Replace mutating method at ProposalCard.jsx:121

**File:** app/src/islands/pages/proposals/ProposalCard.jsx
**Line:** 121
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals, /guest-proposals

**Current Code:**
```javascript
const sorted = [...dayIndices].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify ProposalCard component/function still works correctly
- [ ] Check affected pages: /host-proposals, /guest-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 176: Replace imperative loop at ProposalCard.jsx:130

**File:** app/src/islands/pages/proposals/ProposalCard.jsx
**Line:** 130
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /host-proposals, /guest-proposals

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify ProposalCard component/function still works correctly
- [ ] Check affected pages: /host-proposals, /guest-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 177: Replace mutating method at useEmailSmsUnitPageLogic.js:229

**File:** app/src/islands/pages/useEmailSmsUnitPageLogic.js
**Line:** 229
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /email-sms-unit

**Current Code:**
```javascript
emails.push('');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useEmailSmsUnitPageLogic component/function still works correctly
- [ ] Check affected pages: /email-sms-unit
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 178: Replace mutating method at useSearchPageLogic.js:148

**File:** app/src/islands/pages/useSearchPageLogic.js
**Line:** 148
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
if (neighborhoodName) locationParts.push(neighborhoodName)
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useSearchPageLogic component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 179: Replace mutating method at useSearchPageLogic.js:149

**File:** app/src/islands/pages/useSearchPageLogic.js
**Line:** 149
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search

**Current Code:**
```javascript
if (boroughName) locationParts.push(boroughName)
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useSearchPageLogic component/function still works correctly
- [ ] Check affected pages: /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 180: Replace imperative loop at AiSignupMarketReport.jsx:47

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 47
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /signup

**Current Code:**
```javascript
for (const pattern of namePatterns) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AiSignupMarketReport component/function still works correctly
- [ ] Check affected pages: /signup
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 181: Replace imperative loop at AiSignupMarketReport.jsx:111

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 111
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /signup

**Current Code:**
```javascript
for (const pattern of standardPhonePatterns) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AiSignupMarketReport component/function still works correctly
- [ ] Check affected pages: /signup
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 182: Replace imperative loop at AiSignupMarketReport.jsx:123

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 123
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /signup

**Current Code:**
```javascript
for (const pattern of explicitPhonePatterns) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AiSignupMarketReport component/function still works correctly
- [ ] Check affected pages: /signup
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 183: Replace imperative loop at AiSignupMarketReport.jsx:680

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 680
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /signup

**Current Code:**
```javascript
for (const topic of FREEFORM_TOPICS) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify AiSignupMarketReport component/function still works correctly
- [ ] Check affected pages: /signup
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 184: Replace mutating method at AiSignupMarketReport.jsx:683

**File:** app/src/islands/shared/AiSignupMarketReport/AiSignupMarketReport.jsx
**Line:** 683
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /signup

**Current Code:**
```javascript
detectedTopics.push(topic.id);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify AiSignupMarketReport component/function still works correctly
- [ ] Check affected pages: /signup
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 185: Replace mutating method at CreateProposalFlowV2.jsx:257

**File:** app/src/islands/shared/CreateProposalFlowV2.jsx
**Line:** 257
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
const sorted = [...dayObjs].sort((a, b) => a.dayOfWeek - b.dayOfWeek);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify CreateProposalFlowV2 component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 186: Replace imperative loop at CreateProposalFlowV2.jsx:267

**File:** app/src/islands/shared/CreateProposalFlowV2.jsx
**Line:** 267
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
for (let i = 0; i < dayNumbers.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify CreateProposalFlowV2 component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 187: Replace mutating method at DaysSelectionSection.jsx:63

**File:** app/src/islands/shared/CreateProposalFlowV2Components/DaysSelectionSection.jsx
**Line:** 63
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
const sorted = [...dayNumbers].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify DaysSelectionSection component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 188: Replace imperative loop at DaysSelectionSection.jsx:72

**File:** app/src/islands/shared/CreateProposalFlowV2Components/DaysSelectionSection.jsx
**Line:** 72
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
for (let i = 0; i < sorted.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify DaysSelectionSection component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 189: Replace mutating method at useEditListingDetailsLogic.js:267

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 267
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
if (city) parts.push(city);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useEditListingDetailsLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 190: Replace mutating method at useEditListingDetailsLogic.js:268

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 268
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
if (state) parts.push(state);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useEditListingDetailsLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 191: Replace mutating method at useEditListingDetailsLogic.js:269

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 269
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
if (zip) parts.push(zip);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useEditListingDetailsLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 192: Replace imperative loop at useEditListingDetailsLogic.js:528

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 528
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (const [key, value] of Object.entries(formData)) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify useEditListingDetailsLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 193: Replace imperative loop at useEditListingDetailsLogic.js:833

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 833
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
for (let i = 0; i < files.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify useEditListingDetailsLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 194: Replace mutating method at useEditListingDetailsLogic.js:837

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 837
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
uploadedUrls.push(result.url);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useEditListingDetailsLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 195: Replace mutating method at useEditListingDetailsLogic.js:946

**File:** app/src/islands/shared/EditListingDetails/useEditListingDetailsLogic.js
**Line:** 946
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard

**Current Code:**
```javascript
updated.unshift(selectedPhoto);
```

**Refactoring Guidance:**
Use spread at beginning: `[item, ...arr]`

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useEditListingDetailsLogic component/function still works correctly
- [ ] Check affected pages: /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 196: Replace mutating method at ExternalReviews.jsx:60

**File:** app/src/islands/shared/ExternalReviews.jsx
**Line:** 60
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease

**Current Code:**
```javascript
acc[review.platform].push(review);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ExternalReviews component/function still works correctly
- [ ] Check affected pages: /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 197: Replace mutating method at GoogleMap.jsx:272

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 272
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
photoIds.push(...photosField);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify GoogleMap component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 198: Replace mutating method at GoogleMap.jsx:277

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 277
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
photoIds.push(...parsed);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify GoogleMap component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 199: Replace mutating method at GoogleMap.jsx:612

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 612
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
skippedInvalidCoordinates.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify GoogleMap component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 200: Replace mutating method at GoogleMap.jsx:643

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 643
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify GoogleMap component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 201: Replace mutating method at GoogleMap.jsx:705

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 705
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
skippedInvalidCoordinates.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify GoogleMap component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 202: Replace mutating method at GoogleMap.jsx:733

**File:** app/src/islands/shared/GoogleMap.jsx
**Line:** 733
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
markersRef.current.push(marker);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify GoogleMap component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 203: Replace mutating method at ScheduleSelector.jsx:119

**File:** app/src/islands/shared/HostEditingProposal/ScheduleSelector.jsx
**Line:** 119
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
if (isSelected) classes.push('hss-selected')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleSelector component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 204: Replace mutating method at ScheduleSelector.jsx:120

**File:** app/src/islands/shared/HostEditingProposal/ScheduleSelector.jsx
**Line:** 120
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
if (!isAvailable) classes.push('hss-unavailable')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleSelector component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 205: Replace mutating method at ScheduleSelector.jsx:121

**File:** app/src/islands/shared/HostEditingProposal/ScheduleSelector.jsx
**Line:** 121
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
if (disabled) classes.push('hss-disabled')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleSelector component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 206: Replace mutating method at types.js:136

**File:** app/src/islands/shared/HostEditingProposal/types.js
**Line:** 136
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
const sortedNights = [...selectedNights].sort((a, b) => a - b)
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 207: Replace mutating method at types.js:148

**File:** app/src/islands/shared/HostEditingProposal/types.js
**Line:** 148
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /host-proposals

**Current Code:**
```javascript
const sortedNights = [...selectedNights].sort((a, b) => a - b)
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify types component/function still works correctly
- [ ] Check affected pages: /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 208: Replace mutating method at HostScheduleSelector.jsx:248

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 248
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('hss-selected')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 209: Replace mutating method at HostScheduleSelector.jsx:252

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 252
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('hss-non-contiguous')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 210: Replace mutating method at HostScheduleSelector.jsx:258

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 258
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('hss-unavailable')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 211: Replace mutating method at HostScheduleSelector.jsx:263

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 263
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('hss-disabled')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 212: Replace mutating method at HostScheduleSelector.jsx:301

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 301
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('hss-preview-mode')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 213: Replace mutating method at HostScheduleSelector.jsx:303

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 303
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('hss-step-by-step-mode')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 214: Replace mutating method at HostScheduleSelector.jsx:305

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 305
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('hss-proposal-mode')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 215: Replace mutating method at HostScheduleSelector.jsx:309

**File:** app/src/islands/shared/HostScheduleSelector/HostScheduleSelector.jsx
**Line:** 309
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push(className)
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify HostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 216: Replace mutating method at SimpleHostScheduleSelector.jsx:117

**File:** app/src/islands/shared/HostScheduleSelector/SimpleHostScheduleSelector.jsx
**Line:** 117
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
const newSelection = [...selectedNights, nightId].sort((a, b) => {
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SimpleHostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 217: Replace mutating method at SimpleHostScheduleSelector.jsx:145

**File:** app/src/islands/shared/HostScheduleSelector/SimpleHostScheduleSelector.jsx
**Line:** 145
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('shss-selected')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SimpleHostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 218: Replace mutating method at SimpleHostScheduleSelector.jsx:149

**File:** app/src/islands/shared/HostScheduleSelector/SimpleHostScheduleSelector.jsx
**Line:** 149
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
classes.push('shss-disabled')
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SimpleHostScheduleSelector component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 219: Replace mutating method at utils.js:25

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 25
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
.sort((a, b) => a - b)
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 220: Replace imperative loop at utils.js:29

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 29
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
for (let i = 1; i < numbers.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 221: Replace mutating method at utils.js:31

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 31
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
gaps.push(i)
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 222: Replace imperative loop at utils.js:59

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 59
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
for (let i = startIdx; i <= endIdx; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 223: Replace mutating method at utils.js:60

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 60
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
sequence.push(getNightByDayIndex(i).id)
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 224: Replace imperative loop at utils.js:64

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 64
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
for (let i = startIdx; i >= endIdx; i--) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 225: Replace mutating method at utils.js:65

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 65
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
sequence.push(getNightByDayIndex(i).id)
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 226: Replace mutating method at utils.js:133

**File:** app/src/islands/shared/HostScheduleSelector/utils.js
**Line:** 133
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /listing-dashboard, /host-proposals

**Current Code:**
```javascript
return [...nights].sort((a, b) => {
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify utils component/function still works correctly
- [ ] Check affected pages: /listing-dashboard, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 227: Replace mutating method at LoggedInAvatar.jsx:174

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 174
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 228: Replace mutating method at LoggedInAvatar.jsx:186

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 186
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 229: Replace mutating method at LoggedInAvatar.jsx:201

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 201
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 230: Replace mutating method at LoggedInAvatar.jsx:217

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 217
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 231: Replace mutating method at LoggedInAvatar.jsx:234

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 234
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 232: Replace mutating method at LoggedInAvatar.jsx:248

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 248
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 233: Replace mutating method at LoggedInAvatar.jsx:262

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 262
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 234: Replace mutating method at LoggedInAvatar.jsx:276

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 276
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 235: Replace mutating method at LoggedInAvatar.jsx:288

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 288
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 236: Replace mutating method at LoggedInAvatar.jsx:301

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 301
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 237: Replace mutating method at LoggedInAvatar.jsx:313

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 313
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 238: Replace mutating method at LoggedInAvatar.jsx:323

**File:** app/src/islands/shared/LoggedInAvatar/LoggedInAvatar.jsx
**Line:** 323
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All authenticated pages (header)

**Current Code:**
```javascript
items.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify LoggedInAvatar component/function still works correctly
- [ ] Check affected pages: All authenticated pages (header)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 239: Replace mutating method at notificationCategories.js:122

**File:** app/src/islands/shared/NotificationSettingsIsland/notificationCategories.js
**Line:** 122
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /account-profile

**Current Code:**
```javascript
arr.push(channel);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify notificationCategories component/function still works correctly
- [ ] Check affected pages: /account-profile
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 240: Replace imperative loop at useRentalApplicationWizardLogic.js:267

**File:** app/src/islands/shared/RentalApplicationWizardModal/useRentalApplicationWizardLogic.js
**Line:** 267
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /rental-application

**Current Code:**
```javascript
for (let step = 1; step <= TOTAL_STEPS; step++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify useRentalApplicationWizardLogic component/function still works correctly
- [ ] Check affected pages: /rental-application
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 241: Replace mutating method at useRentalApplicationWizardLogic.js:269

**File:** app/src/islands/shared/RentalApplicationWizardModal/useRentalApplicationWizardLogic.js
**Line:** 269
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /rental-application

**Current Code:**
```javascript
newCompleted.push(step);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify useRentalApplicationWizardLogic component/function still works correctly
- [ ] Check affected pages: /rental-application
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 242: Replace mutating method at ScheduleCohost.jsx:709

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 709
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
if (isOtherMonth) classNames.push('schedule-cohost-calendar-day--other');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleCohost component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 243: Replace mutating method at ScheduleCohost.jsx:710

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 710
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
if (isPast) classNames.push('schedule-cohost-calendar-day--past');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleCohost component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 244: Replace mutating method at ScheduleCohost.jsx:711

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 711
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
if (isActive) classNames.push('schedule-cohost-calendar-day--selected');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleCohost component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 245: Replace mutating method at ScheduleCohost.jsx:712

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 712
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
if (hasSlots) classNames.push('schedule-cohost-calendar-day--has-slots');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleCohost component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 246: Replace mutating method at ScheduleCohost.jsx:713

**File:** app/src/islands/shared/ScheduleCohost/ScheduleCohost.jsx
**Line:** 713
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
if (isTodayDate) classNames.push('schedule-cohost-calendar-day--today');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify ScheduleCohost component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 247: Replace imperative loop at cohostService.js:40

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 40
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
for (let i = 0; i < totalDays; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify cohostService component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 248: Replace mutating method at cohostService.js:43

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 43
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
days.push(date);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify cohostService component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 249: Replace imperative loop at cohostService.js:61

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 61
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
for (let hour = startHour; hour < endHour; hour++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify cohostService component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 250: Replace imperative loop at cohostService.js:62

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 62
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
for (let minutes = 0; minutes < 60; minutes += intervalMinutes) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify cohostService component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 251: Replace mutating method at cohostService.js:66

**File:** app/src/islands/shared/ScheduleCohost/cohostService.js
**Line:** 66
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /schedule-cohost

**Current Code:**
```javascript
slots.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify cohostService component/function still works correctly
- [ ] Check affected pages: /schedule-cohost
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 252: Replace mutating method at SearchScheduleSelector.jsx:319

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 319
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
const sortedDays = [...daysArray].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 253: Replace imperative loop at SearchScheduleSelector.jsx:323

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 323
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
for (let i = 1; i < sortedDays.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 254: Replace mutating method at SearchScheduleSelector.jsx:344

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 344
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
const sortedUnselected = [...unselectedDays].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 255: Replace imperative loop at SearchScheduleSelector.jsx:345

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 345
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
for (let i = 1; i < sortedUnselected.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 256: Replace imperative loop at SearchScheduleSelector.jsx:446

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 446
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
for (let i = 0; i < dayCount; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 257: Replace mutating method at SearchScheduleSelector.jsx:546

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 546
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
const sortedDays = [...selectedDaysArray].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 258: Replace imperative loop at SearchScheduleSelector.jsx:557

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 557
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
for (let i = 0; i < sortedDays.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 259: Replace mutating method at SearchScheduleSelector.jsx:585

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 585
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
checkoutDayIndex = sortedDays.filter(day => day < gapStart).pop();
```

**Refactoring Guidance:**
Use slice: `arr.slice(0, -1)` to get all but last

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 260: Replace mutating method at SearchScheduleSelector.jsx:617

**File:** app/src/islands/shared/SearchScheduleSelector.jsx
**Line:** 617
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /favorite-listings

**Current Code:**
```javascript
const selectedDaysArray = Array.from(selectedDays).sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify SearchScheduleSelector component/function still works correctly
- [ ] Check affected pages: /search, /favorite-listings
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 261: Replace mutating method at suggestedProposalService.js:89

**File:** app/src/islands/shared/SuggestedProposals/suggestedProposalService.js
**Line:** 89
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /proposals-suggested

**Current Code:**
```javascript
summaryMap[proposalId].push(summary);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify suggestedProposalService component/function still works correctly
- [ ] Check affected pages: /proposals-suggested
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 262: Replace mutating method at BookTimeSlot.jsx:155

**File:** app/src/islands/shared/VirtualMeetingManager/BookTimeSlot.jsx
**Line:** 155
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
classes.push('vm-date-button-active');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify BookTimeSlot component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 263: Replace mutating method at BookTimeSlot.jsx:159

**File:** app/src/islands/shared/VirtualMeetingManager/BookTimeSlot.jsx
**Line:** 159
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
classes.push('vm-date-button-has-slots');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify BookTimeSlot component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 264: Replace imperative loop at dateUtils.js:71

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 71
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
for (let hour = startHour; hour < endHour; hour++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify dateUtils component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 265: Replace imperative loop at dateUtils.js:72

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 72
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
for (let minute = 0; minute < 60; minute += interval) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify dateUtils component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 266: Replace mutating method at dateUtils.js:75

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 75
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
slots.push(slotTime);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify dateUtils component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 267: Replace imperative loop at dateUtils.js:95

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 95
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
for (let i = 0; i < startingDayOfWeek; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify dateUtils component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 268: Replace mutating method at dateUtils.js:96

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 96
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
days.push(null);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify dateUtils component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 269: Replace imperative loop at dateUtils.js:100

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 100
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
for (let day = 1; day <= daysInMonth; day++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify dateUtils component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 270: Replace mutating method at dateUtils.js:101

**File:** app/src/islands/shared/VirtualMeetingManager/dateUtils.js
**Line:** 101
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
days.push(new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify dateUtils component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 271: Replace imperative loop at virtualMeetingService.js:312

**File:** app/src/islands/shared/VirtualMeetingManager/virtualMeetingService.js
**Line:** 312
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /virtual-meeting

**Current Code:**
```javascript
for (let attempt = 0; attempt < maxRetries; attempt++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify virtualMeetingService component/function still works correctly
- [ ] Check affected pages: /virtual-meeting
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 272: Replace mutating method at aiService.js:106

**File:** app/src/lib/aiService.js
**Line:** 106
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /self-listing

**Current Code:**
```javascript
return [...amenities].sort((a, b) => {
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify aiService component/function still works correctly
- [ ] Check affected pages: /search, /self-listing
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 273: Replace imperative loop at auth.js:563

**File:** app/src/lib/auth.js
**Line:** 563
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** All authenticated pages

**Current Code:**
```javascript
while (verifyAttempts < maxVerifyAttempts) {
```

**Refactoring Guidance:**
Consider `Array.from()` with iterator, or generator function, or reduce pattern

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify auth component/function still works correctly
- [ ] Check affected pages: All authenticated pages
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 274: Replace imperative loop at auth.js:786

**File:** app/src/lib/auth.js
**Line:** 786
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** All authenticated pages

**Current Code:**
```javascript
while (verifyAttempts < maxVerifyAttempts) {
```

**Refactoring Guidance:**
Consider `Array.from()` with iterator, or generator function, or reduce pattern

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify auth component/function still works correctly
- [ ] Check affected pages: All authenticated pages
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 275: Replace imperative loop at availabilityValidation.js:38

**File:** app/src/lib/availabilityValidation.js
**Line:** 38
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 276: Replace imperative loop at availabilityValidation.js:65

**File:** app/src/lib/availabilityValidation.js
**Line:** 65
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
for (let i = minNotSelected; i <= maxNotSelected; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 277: Replace mutating method at availabilityValidation.js:66

**File:** app/src/lib/availabilityValidation.js
**Line:** 66
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
expectedNotSelected.push(i);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 278: Replace mutating method at availabilityValidation.js:97

**File:** app/src/lib/availabilityValidation.js
**Line:** 97
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
const sorted = [...selectedDays].sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 279: Replace imperative loop at availabilityValidation.js:106

**File:** app/src/lib/availabilityValidation.js
**Line:** 106
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 280: Replace mutating method at availabilityValidation.js:166

**File:** app/src/lib/availabilityValidation.js
**Line:** 166
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push('Please select at least one day');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 281: Replace mutating method at availabilityValidation.js:175

**File:** app/src/lib/availabilityValidation.js
**Line:** 175
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push('Please check for contiguous nights to continue with your proposal');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 282: Replace mutating method at availabilityValidation.js:181

**File:** app/src/lib/availabilityValidation.js
**Line:** 181
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.warnings.push(`Host prefers at least ${listing['Minimum Nights']} nights per week`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 283: Replace mutating method at availabilityValidation.js:186

**File:** app/src/lib/availabilityValidation.js
**Line:** 186
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.warnings.push(`Host prefers at most ${listing['Maximum Nights']} nights per week`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 284: Replace mutating method at availabilityValidation.js:199

**File:** app/src/lib/availabilityValidation.js
**Line:** 199
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push('Some selected days are not available for this listing');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 285: Replace mutating method at availabilityValidation.js:271

**File:** app/src/lib/availabilityValidation.js
**Line:** 271
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push('Please select a move-in date');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 286: Replace mutating method at availabilityValidation.js:280

**File:** app/src/lib/availabilityValidation.js
**Line:** 280
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push('Move-in date cannot be in the past');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 287: Replace mutating method at availabilityValidation.js:287

**File:** app/src/lib/availabilityValidation.js
**Line:** 287
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push('Move-in date is outside available range');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 288: Replace mutating method at availabilityValidation.js:294

**File:** app/src/lib/availabilityValidation.js
**Line:** 294
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push('Selected move-in date is not available');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 289: Replace mutating method at availabilityValidation.js:305

**File:** app/src/lib/availabilityValidation.js
**Line:** 305
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search, /listing-dashboard

**Current Code:**
```javascript
result.errors.push(`Move-in date must be on a ${DAY_NAMES[checkInDay]} based on your selected schedule`);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify availabilityValidation component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 290: Replace mutating method at dataLookups.js:562

**File:** app/src/lib/dataLookups.js
**Line:** 562
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data lookups)

**Current Code:**
```javascript
policies.push({ id, display: policy.display });
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify dataLookups component/function still works correctly
- [ ] Check affected pages: Multiple pages (data lookups)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 291: Replace mutating method at dataLookups.js:592

**File:** app/src/lib/dataLookups.js
**Line:** 592
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data lookups)

**Current Code:**
```javascript
reasons.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify dataLookups component/function still works correctly
- [ ] Check affected pages: Multiple pages (data lookups)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 292: Replace mutating method at dataLookups.js:598

**File:** app/src/lib/dataLookups.js
**Line:** 598
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data lookups)

**Current Code:**
```javascript
return reasons.sort((a, b) => a.displayOrder - b.displayOrder);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify dataLookups component/function still works correctly
- [ ] Check affected pages: Multiple pages (data lookups)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 293: Replace mutating method at dataLookups.js:609

**File:** app/src/lib/dataLookups.js
**Line:** 609
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data lookups)

**Current Code:**
```javascript
reasons.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify dataLookups component/function still works correctly
- [ ] Check affected pages: Multiple pages (data lookups)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 294: Replace mutating method at dataLookups.js:615

**File:** app/src/lib/dataLookups.js
**Line:** 615
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data lookups)

**Current Code:**
```javascript
return reasons.sort((a, b) => a.displayOrder - b.displayOrder);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify dataLookups component/function still works correctly
- [ ] Check affected pages: Multiple pages (data lookups)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 295: Replace mutating method at hotjar.js:18

**File:** app/src/lib/hotjar.js
**Line:** 18
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All pages (analytics)

**Current Code:**
```javascript
h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify hotjar component/function still works correctly
- [ ] Check affected pages: All pages (analytics)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 296: Replace mutating method at listingDataFetcher.js:201

**File:** app/src/lib/listingDataFetcher.js
**Line:** 201
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /view-split-lease, /search

**Current Code:**
```javascript
sortedPhotos = sortedPhotos.sort((a, b) => {
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify listingDataFetcher component/function still works correctly
- [ ] Check affected pages: /view-split-lease, /search
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 297: Replace mutating method at listingService.js:335

**File:** app/src/lib/listingService.js
**Line:** 335
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
currentListings.push(listingId);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 298: Replace imperative loop at listingService.js:766

**File:** app/src/lib/listingService.js
**Line:** 766
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
for (const day of dayOrder) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 299: Replace mutating method at listingService.js:768

**File:** app/src/lib/listingService.js
**Line:** 768
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
result.push(dayNameMapping[day]);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 300: Replace imperative loop at listingService.js:982

**File:** app/src/lib/listingService.js
**Line:** 982
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
for (const [key, value] of Object.entries(formData)) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 301: Replace imperative loop at listingService.js:1076

**File:** app/src/lib/listingService.js
**Line:** 1076
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
for (const [day, isSelected] of Object.entries(availableNights)) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 302: Replace mutating method at listingService.js:1078

**File:** app/src/lib/listingService.js
**Line:** 1078
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
result.push(dayMapping[day]);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 303: Replace mutating method at listingService.js:1082

**File:** app/src/lib/listingService.js
**Line:** 1082
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
return result.sort((a, b) => a - b);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 304: Replace imperative loop at listingService.js:1240

**File:** app/src/lib/listingService.js
**Line:** 1240
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** Multiple pages (listing operations)

**Current Code:**
```javascript
for (const dayNum of daysArray) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify listingService component/function still works correctly
- [ ] Check affected pages: Multiple pages (listing operations)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 305: Replace imperative loop at photoUpload.js:28

**File:** app/src/lib/photoUpload.js
**Line:** 28
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing, /listing-dashboard

**Current Code:**
```javascript
for (let offset = 0; offset < byteCharacters.length; offset += 512) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify photoUpload component/function still works correctly
- [ ] Check affected pages: /self-listing, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 306: Replace imperative loop at photoUpload.js:32

**File:** app/src/lib/photoUpload.js
**Line:** 32
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing, /listing-dashboard

**Current Code:**
```javascript
for (let i = 0; i < slice.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify photoUpload component/function still works correctly
- [ ] Check affected pages: /self-listing, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 307: Replace mutating method at photoUpload.js:36

**File:** app/src/lib/photoUpload.js
**Line:** 36
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing, /listing-dashboard

**Current Code:**
```javascript
byteArrays.push(new Uint8Array(byteNumbers));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify photoUpload component/function still works correctly
- [ ] Check affected pages: /self-listing, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 308: Replace mutating method at photoUpload.js:86

**File:** app/src/lib/photoUpload.js
**Line:** 86
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing, /listing-dashboard

**Current Code:**
```javascript
extension = photo.file.name.split('.').pop().toLowerCase() || 'jpg';
```

**Refactoring Guidance:**
Use slice: `arr.slice(0, -1)` to get all but last

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify photoUpload component/function still works correctly
- [ ] Check affected pages: /self-listing, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 309: Replace imperative loop at photoUpload.js:164

**File:** app/src/lib/photoUpload.js
**Line:** 164
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /self-listing, /listing-dashboard

**Current Code:**
```javascript
for (let i = 0; i < photos.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify photoUpload component/function still works correctly
- [ ] Check affected pages: /self-listing, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 310: Replace mutating method at photoUpload.js:170

**File:** app/src/lib/photoUpload.js
**Line:** 170
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing, /listing-dashboard

**Current Code:**
```javascript
uploadedPhotos.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify photoUpload component/function still works correctly
- [ ] Check affected pages: /self-listing, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 311: Replace mutating method at photoUpload.js:184

**File:** app/src/lib/photoUpload.js
**Line:** 184
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /self-listing, /listing-dashboard

**Current Code:**
```javascript
uploadedPhotos.push({
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify photoUpload component/function still works correctly
- [ ] Check affected pages: /self-listing, /listing-dashboard
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 312: Replace mutating method at userProposalQueries.js:225

**File:** app/src/lib/proposals/userProposalQueries.js
**Line:** 225
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /guest-proposals, /host-proposals

**Current Code:**
```javascript
listingsNeedingPhotoFetch.push(listing._id);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify userProposalQueries component/function still works correctly
- [ ] Check affected pages: /guest-proposals, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 313: Replace mutating method at dayHelpers.js:44

**File:** app/src/lib/scheduleSelector/dayHelpers.js
**Line:** 44
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
return [...days].sort((a, b) => a.dayOfWeek - b.dayOfWeek);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify dayHelpers component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 314: Replace imperative loop at dayHelpers.js:112

**File:** app/src/lib/scheduleSelector/dayHelpers.js
**Line:** 112
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
for (let i = 0; i < sortedDays.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify dayHelpers component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 315: Replace mutating method at dayHelpers.js:113

**File:** app/src/lib/scheduleSelector/dayHelpers.js
**Line:** 113
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
nights.push(createNight(sortedDays[i].dayOfWeek));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify dayHelpers component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 316: Replace imperative loop at nightCalculations.js:14

**File:** app/src/lib/scheduleSelector/nightCalculations.js
**Line:** 14
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
for (let i = 0; i < sorted.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify nightCalculations component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 317: Replace mutating method at nightCalculations.js:15

**File:** app/src/lib/scheduleSelector/nightCalculations.js
**Line:** 15
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
nights.push(createNight(sorted[i].dayOfWeek));
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify nightCalculations component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 318: Replace imperative loop at nightCalculations.js:50

**File:** app/src/lib/scheduleSelector/nightCalculations.js
**Line:** 50
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
for (let i = 0; i < dayNumbers.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify nightCalculations component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 319: Replace imperative loop at validators.js:101

**File:** app/src/lib/scheduleSelector/validators.js
**Line:** 101
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
for (let i = minNotSelected; i <= maxNotSelected; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify validators component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 320: Replace mutating method at validators.js:102

**File:** app/src/lib/scheduleSelector/validators.js
**Line:** 102
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
expectedNotSelected.push(i);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify validators component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 321: Replace imperative loop at validators.js:114

**File:** app/src/lib/scheduleSelector/validators.js
**Line:** 114
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease, /host-proposals

**Current Code:**
```javascript
for (let i = 0; i < dayNumbers.length - 1; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify validators component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease, /host-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 322: Replace imperative loop at secureStorage.js:233

**File:** app/src/lib/secureStorage.js
**Line:** 233
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** All pages (storage)

**Current Code:**
```javascript
for (let i = 0; i < localStorage.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify secureStorage component/function still works correctly
- [ ] Check affected pages: All pages (storage)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 323: Replace mutating method at secureStorage.js:236

**File:** app/src/lib/secureStorage.js
**Line:** 236
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** All pages (storage)

**Current Code:**
```javascript
keysToRemove.push(key);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify secureStorage component/function still works correctly
- [ ] Check affected pages: All pages (storage)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 324: Replace imperative loop at supabaseUtils.js:178

**File:** app/src/lib/supabaseUtils.js
**Line:** 178
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
for (const photo of photos) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 325: Replace mutating method at supabaseUtils.js:189

**File:** app/src/lib/supabaseUtils.js
**Line:** 189
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
photoUrls.push(photoUrl);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 326: Replace mutating method at supabaseUtils.js:203

**File:** app/src/lib/supabaseUtils.js
**Line:** 203
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
photoUrls.push(photoUrl);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 327: Replace mutating method at supabaseUtils.js:210

**File:** app/src/lib/supabaseUtils.js
**Line:** 210
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
photoUrls.push(url);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 328: Replace imperative loop at supabaseUtils.js:258

**File:** app/src/lib/supabaseUtils.js
**Line:** 258
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
for (const [key, amenity] of Object.entries(amenitiesMap)) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 329: Replace mutating method at supabaseUtils.js:260

**File:** app/src/lib/supabaseUtils.js
**Line:** 260
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
amenities.push(amenity);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 330: Replace mutating method at supabaseUtils.js:269

**File:** app/src/lib/supabaseUtils.js
**Line:** 269
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
amenities.push(amenitiesMap['kitchen']);
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 331: Replace mutating method at supabaseUtils.js:274

**File:** app/src/lib/supabaseUtils.js
**Line:** 274
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** Multiple pages (data utilities)

**Current Code:**
```javascript
amenities.sort((a, b) => a.priority - b.priority);
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify supabaseUtils component/function still works correctly
- [ ] Check affected pages: Multiple pages (data utilities)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 332: Replace imperative loop at workflowClient.js:139

**File:** app/src/lib/workflowClient.js
**Line:** 139
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** Multiple pages (API calls)

**Current Code:**
```javascript
while (Date.now() - startTime < timeout) {
```

**Refactoring Guidance:**
Consider `Array.from()` with iterator, or generator function, or reduce pattern

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify workflowClient component/function still works correctly
- [ ] Check affected pages: Multiple pages (API calls)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 333: Replace mutating method at calculateCheckInOutDays.js:50

**File:** app/src/logic/calculators/scheduling/calculateCheckInOutDays.js
**Line:** 50
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
const sorted = [...selectedDays].sort((a, b) => a - b)
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify calculateCheckInOutDays component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 334: Replace imperative loop at calculateCheckInOutDays.js:59

**File:** app/src/logic/calculators/scheduling/calculateCheckInOutDays.js
**Line:** 59
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify calculateCheckInOutDays component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 335: Replace mutating method at calculateNextAvailableCheckIn.js:54

**File:** app/src/logic/calculators/scheduling/calculateNextAvailableCheckIn.js
**Line:** 54
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
const sortedDays = [...selectedDayIndices].sort((a, b) => a - b)
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify calculateNextAvailableCheckIn component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 336: Replace io in core at extractListingCoordinates.js:46

**File:** app/src/logic/processors/listing/extractListingCoordinates.js
**Line:** 46
**Violation:** IO_IN_CORE - I/O operation in pure/core logic layer
**Severity:** High
**Principle:** EFFECTS AT EDGES

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
console.error(
```

**Refactoring Guidance:**
Move I/O (console.log/warn/error) to imperative shell. Return data/errors to caller.

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Verify extractListingCoordinates component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 337: Replace io in core at extractListingCoordinates.js:62

**File:** app/src/logic/processors/listing/extractListingCoordinates.js
**Line:** 62
**Violation:** IO_IN_CORE - I/O operation in pure/core logic layer
**Severity:** High
**Principle:** EFFECTS AT EDGES

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
console.error(' extractListingCoordinates: Failed to parse Location - Address:', {
```

**Refactoring Guidance:**
Move I/O (console.log/warn/error) to imperative shell. Return data/errors to caller.

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Verify extractListingCoordinates component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 338: Replace io in core at extractListingCoordinates.js:98

**File:** app/src/logic/processors/listing/extractListingCoordinates.js
**Line:** 98
**Violation:** IO_IN_CORE - I/O operation in pure/core logic layer
**Severity:** High
**Principle:** EFFECTS AT EDGES

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
console.warn(' extractListingCoordinates: No valid coordinates found for listing:', {
```

**Refactoring Guidance:**
Move I/O (console.log/warn/error) to imperative shell. Return data/errors to caller.

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Verify extractListingCoordinates component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 339: Replace io in core at processUserData.js:58

**File:** app/src/logic/processors/user/processUserData.js
**Line:** 58
**Violation:** IO_IN_CORE - I/O operation in pure/core logic layer
**Severity:** High
**Principle:** EFFECTS AT EDGES

**Expected Affected Pages:** All authenticated pages

**Current Code:**
```javascript
console.warn(`processUserData: User ${rawUser._id} has no name fields, using default`)
```

**Refactoring Guidance:**
Move I/O (console.log/warn/error) to imperative shell. Return data/errors to caller.

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Verify processUserData component/function still works correctly
- [ ] Check affected pages: All authenticated pages
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 340: Replace io in core at proposalRules.js:306

**File:** app/src/logic/rules/proposals/proposalRules.js
**Line:** 306
**Violation:** IO_IN_CORE - I/O operation in pure/core logic layer
**Severity:** High
**Principle:** EFFECTS AT EDGES

**Expected Affected Pages:** /host-proposals, /guest-proposals

**Current Code:**
```javascript
console.warn('[getCancellationReasonOptions] Cache empty, using fallback values');
```

**Refactoring Guidance:**
Move I/O (console.log/warn/error) to imperative shell. Return data/errors to caller.

**Why This Matters:**
Pure business logic (calculators/rules/processors) should not perform I/O. This makes testing harder and violates Functional Core principle.

**Testing:**
- [ ] Verify proposalRules component/function still works correctly
- [ ] Check affected pages: /host-proposals, /guest-proposals
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 341: Replace mutating method at isScheduleContiguous.js:55

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 55
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
const sorted = [...selectedDayIndices].sort((a, b) => a - b)
```

**Refactoring Guidance:**
Use `.toSorted()` (ES2023) or `[...arr].sort()` pattern - ensure spread happens BEFORE .sort()

**Why This Matters:**
sort() and reverse() mutate the original array. Use immutable alternatives.

**Testing:**
- [ ] Verify isScheduleContiguous component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 342: Replace imperative loop at isScheduleContiguous.js:64

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 64
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
for (let i = 1; i < sorted.length; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify isScheduleContiguous component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 343: Replace imperative loop at isScheduleContiguous.js:95

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 95
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
for (let i = minNotSelected; i <= maxNotSelected; i++) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify isScheduleContiguous component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 344: Replace mutating method at isScheduleContiguous.js:96

**File:** app/src/logic/rules/scheduling/isScheduleContiguous.js
**Line:** 96
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** /search, /view-split-lease

**Current Code:**
```javascript
expectedNotSelected.push(i)
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify isScheduleContiguous component/function still works correctly
- [ ] Check affected pages: /search, /view-split-lease
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 345: Replace mutating method at routes.config.js:380

**File:** app/src/routes.config.js
**Line:** 380
**Violation:** MUTATING_METHOD - Using mutating array/object method
**Severity:** High
**Principle:** IMMUTABILITY

**Expected Affected Pages:** N/A (build config)

**Current Code:**
```javascript
excludedFromFunctions.push('/guest-proposals', '/guest-proposals/*');
```

**Refactoring Guidance:**
Use spread operator: `[...arr, item]` or filter/map/reduce chain with concat

**Why This Matters:**
Mutating methods modify the original array, making code harder to test and reason about.

**Testing:**
- [ ] Verify routes.config component/function still works correctly
- [ ] Check affected pages: N/A (build config)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 346: Replace imperative loop at vite.config.js:32

**File:** app/vite.config.js
**Line:** 32
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** N/A (build config)

**Current Code:**
```javascript
for (const route of routes) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify vite.config component/function still works correctly
- [ ] Check affected pages: N/A (build config)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 347: Replace imperative loop at vite.config.js:56

**File:** app/vite.config.js
**Line:** 56
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** N/A (build config)

**Current Code:**
```javascript
for (const alias of route.aliases) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify vite.config component/function still works correctly
- [ ] Check affected pages: N/A (build config)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 348: Replace imperative loop at vite.config.js:82

**File:** app/vite.config.js
**Line:** 82
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** N/A (build config)

**Current Code:**
```javascript
for (const entry of entries) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify vite.config component/function still works correctly
- [ ] Check affected pages: N/A (build config)
- [ ] Run relevant unit tests if available

~~~~~

## CHUNK 349: Replace imperative loop at vite.config.js:181

**File:** app/vite.config.js
**Line:** 181
**Violation:** IMPERATIVE_LOOP - Using imperative loop instead of declarative methods
**Severity:** High
**Principle:** DECLARATIVE STYLE

**Expected Affected Pages:** N/A (build config)

**Current Code:**
```javascript
for (const route of internalRoutes) {
```

**Refactoring Guidance:**
Replace with `.map()`, `.filter()`, `.reduce()`, or `.flatMap()` chain

**Why This Matters:**
Declarative array methods (map/filter/reduce) are more expressive and less error-prone than imperative loops.

**Testing:**
- [ ] Verify vite.config component/function still works correctly
- [ ] Check affected pages: N/A (build config)
- [ ] Run relevant unit tests if available

~~~~~

## Implementation Notes

### Priority Order

1. **IO_IN_CORE (5 violations)** - Architectural issue, fix first
2. **IMPERATIVE_LOOP (80 violations)** - Moderate complexity, high impact
3. **MUTATING_METHOD (264 violations)** - Simple fixes, can batch by file

### Common Patterns

#### .push() -> Spread/Filter
```javascript
// Before
const arr = [];
if (condition1) arr.push(item1);
if (condition2) arr.push(item2);

// After
const arr = [
  condition1 && item1,
  condition2 && item2,
].filter(Boolean);
```

#### .sort() -> .toSorted()
```javascript
// Before
const sorted = [...arr].sort((a, b) => a - b);

// After
const sorted = arr.toSorted((a, b) => a - b);
```

#### for loop -> reduce/map
```javascript
// Before
const result = [];
for (const item of items) {
  if (item.active) result.push(item.name);
}

// After
const result = items
  .filter(item => item.active)
  .map(item => item.name);
```

#### console.log in core -> return data
```javascript
// Before (in calculator/processor)
console.error("Failed to parse");
return null;

// After
return { success: false, error: "Failed to parse" };
// Or use Result type pattern
```

---

**Generated by FP Audit Script**

After implementing changes, run `/fp-rater` to verify improvements.