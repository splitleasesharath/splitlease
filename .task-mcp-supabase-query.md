# Task: Execute Supabase SQL Queries for Guest Proposals Test Data

## Context
The parent agent needs to find test data for the guest-proposals page. This requires executing two SQL queries against the Supabase database using the Supabase MCP tools.

## Objectives
1. Execute the first SQL query to find users with proposals
2. Identify the user with the most proposals from the results
3. Execute the second SQL query using that user's ID to get their proposal details
4. Return structured data with:
   - User ID
   - User email (if available)
   - Number of proposals
   - List of proposal IDs

## Step 1: Find Users with Proposals

Execute this SQL query:
```sql
SELECT u._id, u."Name - First", u."Name - Full", u."email as text",
       (SELECT COUNT(*) FROM proposal WHERE "Guest" = u._id) as proposal_count
FROM "user" u
WHERE u._id IN (SELECT DISTINCT "Guest" FROM proposal WHERE "Deleted" IS NOT TRUE OR "Deleted" IS NULL)
LIMIT 5;
```

## Step 2: Get Proposal Details for Top User

From Step 1 results, identify the user with the highest `proposal_count`.

Then execute this query (replace `<the_user_id_you_picked>` with the actual user ID):
```sql
SELECT _id, "Status", "Created Date", "Listing"
FROM proposal
WHERE "Guest" = '<the_user_id_you_picked>'
AND ("Deleted" IS NOT TRUE OR "Deleted" IS NULL)
ORDER BY "Created Date" DESC
LIMIT 3;
```

## Expected Output Format

Return the following in a clear, structured format:

**Test Data for Guest Proposals Page:**
- User ID: [the selected user's _id]
- User Email: [email as text field value]
- User Name: [Name - Full field value]
- Number of Proposals: [proposal_count]
- Proposal IDs: [list of _id values from step 2]

## Success Criteria
- Both SQL queries execute successfully
- The user with the most proposals is correctly identified
- All requested data points are captured and returned
- Data is suitable for testing the guest-proposals page

## Important Notes
- Use Supabase MCP tools exclusively for database operations
- Handle any errors gracefully and report them clearly
- Ensure column names are properly quoted as they contain special characters
- The working directory is: C:/Users/Split Lease/splitleaseteam/!Agent Context and Tools/SL6/Split Lease
