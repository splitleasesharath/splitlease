[
  {
    "file_path": "app/src/lib/availabilityValidation.js",
    "line_number": 243,
    "violation_type": "MUTATING_METHOD",
    "severity": "high",
    "principle": "IMMUTABILITY",
    "description": "Using .push() to mutate errors array",
    "current_code": "result.errors.push('Please select a move-in date');",
    "suggested_fix": "Use declarative control flow (e.g. array filtering) or return immutable result",
    "rationale": "Mutation makes state tracking difficult. Use declarative patterns."
  },
  {
    "file_path": "app/src/lib/availabilityValidation.js",
    "line_number": 248,
    "violation_type": "IO_IN_CORE",
    "severity": "high",
    "principle": "PURITY",
    "description": "Impure function: dependent on new Date() (current time)",
    "current_code": "const today = new Date();",
    "suggested_fix": "Pass 'today' as an argument to the function",
    "rationale": "Functions should be pure and deterministic. Implicit dependency on system time makes testing hard."
  },
  {
    "file_path": "app/src/lib/availabilityValidation.js",
    "line_number": 252,
    "violation_type": "MUTATING_METHOD",
    "severity": "high",
    "principle": "IMMUTABILITY",
    "description": "Using .push() to mutate errors array",
    "current_code": "result.errors.push('Move-in date cannot be in the past');",
    "suggested_fix": "Use declarative control flow",
    "rationale": "Mutation makes state tracking difficult."
  },
  {
    "file_path": "app/src/lib/availabilityValidation.js",
    "line_number": 258,
    "violation_type": "MUTATING_METHOD",
    "severity": "high",
    "principle": "IMMUTABILITY",
    "description": "Using .push() to mutate errors array",
    "current_code": "result.errors.push('Move-in date is outside available range');",
    "suggested_fix": "Use declarative control flow",
    "rationale": "Mutation makes state tracking difficult."
  },
  {
    "file_path": "app/src/lib/availabilityValidation.js",
    "line_number": 264,
    "violation_type": "MUTATING_METHOD",
    "severity": "high",
    "principle": "IMMUTABILITY",
    "description": "Using .push() to mutate errors array",
    "current_code": "result.errors.push('Selected move-in date is not available');",
    "suggested_fix": "Use declarative control flow",
    "rationale": "Mutation makes state tracking difficult."
  },
  {
    "file_path": "app/src/lib/availabilityValidation.js",
    "line_number": 272,
    "violation_type": "MUTATING_METHOD",
    "severity": "high",
    "principle": "IMMUTABILITY",
    "description": "Using .push() to mutate errors array",
    "current_code": "result.errors.push(`Move-in date must be on a ${DAY_NAMES[checkInDay]} based on your selected schedule`);",
    "suggested_fix": "Use declarative control flow",
    "rationale": "Mutation makes state tracking difficult."
  }
]